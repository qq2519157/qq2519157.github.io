{
    "version": "https://jsonfeed.org/version/1",
    "title": "",
    "subtitle": "ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆ",
    "icon": "https://log992.cn/images/favicon.ico",
    "description": "ä¸€ä¸ªç®€ç®€å•å•çš„Androidå¼€å‘",
    "home_page_url": "https://log992.cn",
    "items": [
        {
            "id": "https://log992.cn/play/Shoka%E4%B8%BB%E9%A2%98%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/",
            "url": "https://log992.cn/play/Shoka%E4%B8%BB%E9%A2%98%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/",
            "title": "Shokaä¸»é¢˜åŸºæœ¬æ“ä½œ",
            "date_published": "2023-05-19T03:34:55.000Z",
            "content_html": "<h4 id=\"æ ‡ç­¾æµ‹è¯•\"><a class=\"anchor\" href=\"#æ ‡ç­¾æµ‹è¯•\">#</a> æ ‡ç­¾æµ‹è¯•</h4>\n<figure class=\"highlight tex\"><figcaption data-lang=\"TeX\"><span>æ ‡ç­¾æµ‹è¯•</span><span class=\"exturl\" data-url=\"aHR0cDovL2xvZzE5OTIuY24vcGxheS9TaG9rYSVFNCVCOCVCQiVFOSVBMiU5OCVFNSU5RiVCQSVFNiU5QyVBQyVFNiU5MyU4RCVFNCVCRCU5Qy8=\">æµ‹è¯•é“¾æ¥</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .default<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .info<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .primary<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>:heavy_check_mark:æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .success<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .warning<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">[</span>æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .danger<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">[</span>:broken_heart:æµ‹è¯•æ ‡ç­¾<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>.label .danger<span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><span class=\"label default\">æµ‹è¯•æ ‡ç­¾</span></p>\n<p><span class=\"label info\">æµ‹è¯•æ ‡ç­¾</span></p>\n<p><span class=\"label primary\">æµ‹è¯•æ ‡ç­¾</span></p>\n<p><span class=\"label success\">âœ”ï¸æµ‹è¯•æ ‡ç­¾</span></p>\n<p><span class=\"label warning\">æµ‹è¯•æ ‡ç­¾</span></p>\n<p><span class=\"label danger\">æµ‹è¯•æ ‡ç­¾</span></p>\n<p><span class=\"label danger\">ğŸ’”æµ‹è¯•æ ‡ç­¾</span></p>\n<h4 id=\"é“¾æ¥å—æµ‹è¯•\"><a class=\"anchor\" href=\"#é“¾æ¥å—æµ‹è¯•\">#</a> é“¾æ¥å—æµ‹è¯•</h4>\n<figure class=\"highlight tex\"><figcaption data-lang=\"TeX\"><span>é“¾æ¥å—æµ‹è¯•</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>\n{% links %}\n- site: #ç«™ç‚¹åç§°\n  owner: #ç®¡ç†å‘˜åå­—\n  url: #ç«™ç‚¹ç½‘å€\n  desc: #ç®€çŸ­æè¿°\n  image: #ä¸€å¼ å›¾ç‰‡\n  color: #é¢œè‰²ä»£ç \n{% endlinks %}\n</pre></td></tr></table></figure><p><div class=\"links\"><div class=\"item\" title=\"Logan\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9sb2cxOTkyLmNuLw==\" data-background-image=\"https://image.log1992.com/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9sb2cxOTkyLmNuLw==\">ç©ºæ— ä¹‹å¢ƒ</span>\n          <p class=\"desc\">ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆ</p>\n          </div></div></div></p>\n<h4 id=\"æé†’å—æµ‹è¯•\"><a class=\"anchor\" href=\"#æé†’å—æµ‹è¯•\">#</a> æé†’å—æµ‹è¯•</h4>\n<figure class=\"highlight tex\"><figcaption data-lang=\"TeX\"><span>æé†’å—</span></figcaption><table><tr class=\"marked\"><td data-num=\"1\"></td><td><pre>:::default</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>é»˜è®¤é»˜è®¤</pre></td></tr><tr class=\"marked\"><td data-num=\"3\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"5\"></td><td><pre>:::primary</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>åŸºæœ¬åŸºæœ¬</pre></td></tr><tr class=\"marked\"><td data-num=\"7\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"9\"></td><td><pre>:::info</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>æç¤ºæç¤º</pre></td></tr><tr class=\"marked\"><td data-num=\"11\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"13\"></td><td><pre>:::success</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>æˆåŠŸæˆåŠŸ</pre></td></tr><tr class=\"marked\"><td data-num=\"15\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"17\"></td><td><pre>:::warning</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>è­¦å‘Šè­¦å‘Š</pre></td></tr><tr class=\"marked\"><td data-num=\"19\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"21\"></td><td><pre>:::danger</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>å±é™©å±é™©</pre></td></tr><tr class=\"marked\"><td data-num=\"23\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"25\"></td><td><pre>:::danger no-icon</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>å±é™©å±é™©</pre></td></tr><tr class=\"marked\"><td data-num=\"27\"></td><td><pre>:::</pre></td></tr></table></figure><div class=\"note default\">\n<p>é»˜è®¤é»˜è®¤</p>\n</div>\n<div class=\"note primary\">\n<p>åŸºæœ¬åŸºæœ¬</p>\n</div>\n<div class=\"note info\">\n<p>æç¤ºæç¤º</p>\n</div>\n<div class=\"note success\">\n<p>æˆåŠŸæˆåŠŸ</p>\n</div>\n<div class=\"note warning\">\n<p>è­¦å‘Šè­¦å‘Š</p>\n</div>\n<div class=\"note danger\">\n<p>å±é™©å±é™©</p>\n</div>\n<div class=\"note danger no-icon\">\n<p>å±é™©å±é™©</p>\n</div>\n<h4 id=\"hexo-tagä¸markdownå†²çª\"><a class=\"anchor\" href=\"#hexo-tagä¸markdownå†²çª\">#</a> Hexo Tag ä¸ Markdown å†²çª</h4>\n<p>åœ¨ä»£ç å—ä¸­å†™ Hexo æ ‡ç­¾æ—¶ï¼ŒHexo æ ‡ç­¾çš„ä¼˜å…ˆçº§ä¼šæ¯”ä»£ç å—æ›´é«˜ï¼Œå¯¼è‡´ä»£ç å—æ˜¾ç¤ºå¼‚å¸¸ï¼Œåœ¨æˆ‘çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sb2cxOTkyLmNuL3BsYXkvSGV4byVFOSU5NyVBRSVFOSVBMiU5OCVFNSVCRCU5MiVFNiU4MCVCQi8=\">å‰ä¸€ç¯‡æ–‡ç« </span>ä¸­æœ‰å†™æ˜ï¼Œä½†æ˜¯å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>raw </code> å’Œ <code> endraw</code>  æ ‡ç­¾</p>\n<p>ä¾‹å¦‚</p>\n<figure class=\"highlight tex\"><figcaption data-lang=\"TeX\"><span>Hexo Tagä¸Markdownå†²çª</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>\n{% raw %}\n{% links %}\n- site: ç©ºæ— ä¹‹å¢ƒ\n  owner: Logan\n  url: https://log1992.cn/\n  desc: ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆ\n  image: https://image.log1992.com/avatar.jpg\n  color: #é¢œè‰²ä»£ç \n{% endlinks %}\n{% endraw %}</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr></table></figure><p>è¿™æ ·åŒ…è£¹ä»¥åå°±å¯ä»¥ç›´æ¥åœ¨ä»£ç å—ä¸­å†™ Hexo Tag äº†</p>\n<h4 id=\"éšè—æ–‡å­—æµ‹è¯•\"><a class=\"anchor\" href=\"#éšè—æ–‡å­—æµ‹è¯•\">#</a> éšè—æ–‡å­—æµ‹è¯•</h4>\n<figure class=\"highlight tex\"><figcaption data-lang=\"TeX\"><span>éšè—æ–‡å­—æµ‹è¯•</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>!!é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•!!ï¼š é¼ æ ‡æ»‘è¿‡æ˜¾ç¤ºå†…å®¹</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>!!æ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Š!!<span class=\"token punctuation\">&#123;</span>.bulr<span class=\"token punctuation\">&#125;</span> ï¼š é€‰ä¸­æ–‡å­—æ˜¾ç¤ºå†…å®¹</pre></td></tr></table></figure><p><span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•é»‘å¹•</span>ï¼š é¼ æ ‡æ»‘è¿‡æ˜¾ç¤ºå†…å®¹<br />\n<span class=\"spoiler bulr\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">æ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Šæ¨¡ç³Š</span> ï¼š é€‰ä¸­æ–‡å­—æ˜¾ç¤ºå†…å®¹</p>\n<p>é¼ æ ‡æ»‘è¿‡å¼€å¥–ï¼š<span class=\"spoiler\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">è°¢è°¢æƒ é¡¾ï¼</span><br />\né€‰ä¸­å¼€å¥–ï¼š<span class=\"spoiler bulr\" title=\"ä½ çŸ¥é“å¾—å¤ªå¤šäº†\">å†æ¥äº¿ç“¶ï¼</span></p>\n",
            "tags": [
                "æŠ˜è…¾",
                "Hexo",
                "Shoka"
            ]
        },
        {
            "id": "https://log992.cn/play/Hexo%E9%97%AE%E9%A2%98%E5%BD%92%E6%80%BB/",
            "url": "https://log992.cn/play/Hexo%E9%97%AE%E9%A2%98%E5%BD%92%E6%80%BB/",
            "title": "Hexoé—®é¢˜å½’æ€»",
            "date_published": "2023-05-18T07:51:55.000Z",
            "content_html": "<blockquote>\n<p>ä½¿ç”¨ GitHub çš„ Pages æ­å»ºäº†è‡ªå·±çš„åšå®¢å¹¶ä½¿ç”¨äº† <code>Shoka</code>  ä¸»é¢˜</p>\n</blockquote>\n<h4 id=\"æ˜¾ç¤ºè§†é¢‘\"><a class=\"anchor\" href=\"#æ˜¾ç¤ºè§†é¢‘\">#</a> æ˜¾ç¤ºè§†é¢‘</h4>\n<p>ç›®å‰åœ¨ markdown ä¸­ä½¿ç”¨çš„æ˜¯ <code>video</code>  æ ‡ç­¾æ¥æ˜¾ç¤ºè§†é¢‘ï¼Œä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token attr-name\">controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://image.log1992.com/WeChat_20180919180323.mp4<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://log1992.com/usr/themes/handsome/usr/img/sj/4.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>åœ¨ Typora ä¸­çš„é¢„è§ˆæ•ˆæœå¦‚ä¸‹</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230518162916349.png\" alt=\"\" /></p>\n<p>ä½†æ˜¯ <code>Shoka</code>  ä¸»é¢˜ä½¿ç”¨çš„æ˜¯ <code>hexo-renderer-multi-markdown-it</code>  æ¸²æŸ“å™¨ï¼Œå¯¼è‡´åœ¨æœ€ç»ˆæ˜¾ç¤ºçš„æ—¶å€™ä¼šç›´æ¥æ˜¾ç¤ºæˆ <code>HTML</code>  ä»£ç ï¼ŒæŸ¥çœ‹ä¸»é¢˜ä½œè€…<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYy9zcGVjaWFsLw==\">åšå®¢</span>åï¼Œå‘ç°äº†ä½¿ç”¨ <code>Hexo Tag</code>  çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½œè€…çš„ä»£ç ç¤ºä¾‹åªæœ‰ <code>audio</code>  çš„ï¼Œåœ¨ F12 åæ€»ç®—æ˜¯ææ¸…äº†å®é™…ä½¿ç”¨æ–¹æ³•</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230518165257203.png\" alt=\"\" /></p>\n<p>Tips: ç”±äºä¸»é¢˜åœ¨ä»£ç å—ä¸­å†™ <code>media video</code>  ä¼šç›´æ¥åŠ è½½è§†é¢‘ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯æˆªå›¾å±•ç¤º</p>\n<p>æ•ˆæœå¦‚ä¸‹</p>\n<p><div class=\"media-container\"><div class=\"player\" data-type=\"video\" data-src='[{\"name\":\"è§†é¢‘æ•ˆæœ\",\"url\":[\"https://image.log1992.com/WeChat_20180919180323.mp4\"]}]'></div></div></p>\n<p>æ³¨æ„ï¼šç¼–è¾‘è¿™ä¸ªæœ€å¥½åœ¨å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºæˆè¿™æ ·</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230518163509154.png\" alt=\"\" /></p>\n<h4 id=\"å›¾åºŠé—®é¢˜\"><a class=\"anchor\" href=\"#å›¾åºŠé—®é¢˜\">#</a> å›¾åºŠé—®é¢˜</h4>\n<p>éƒ¨ç½²åœ¨æœ¬åœ°æ—¶ï¼Œæ‰€æœ‰å›¾ç‰‡åŠ è½½æ­£å¸¸ã€‚æ¨é€åˆ° GitHub åï¼Œå›¾ç‰‡å°±éƒ½æŒ‚äº†ã€‚çœ‹äº†ä¸‹ï¼Œä½œè€…ä½¿ç”¨çš„å›¾åºŠä¸ºæ–°æµªå›¾åºŠï¼Œç›®å‰æ–°æµªå›¾åºŠå› ä¸ºé˜²ç›—é“¾ï¼Œå·²ç»ç”¨ä¸äº†äº†ã€‚ä½†æ˜¯ä¸ªäººå¾ˆå–œæ¬¢è‡ªå¸¦çš„äºŒæ¬¡å…ƒå°å§å§å›¾ç‰‡ï¼Œæ‰€ä»¥æƒ³ç»§ç»­ä½¿ç”¨ã€‚æŸ¥éäº†å„ç§æ–¹æ³•ï¼Œç»ˆäºæ‰¾åˆ°ä¸€ä¸ª<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC82MDQ0NzM3MzI/dXRtX2lkPTA=\">é è°±ç‚¹çš„</span></p>\n<p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ç™¾åº¦çš„å›¾ç‰‡ç¼“å­˜æœåŠ¡</p>\n<figure class=\"highlight http\"><figcaption data-lang=\"HTTP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token header\"><span class=\"token header-name keyword\">https</span><span class=\"token punctuation\">:</span><span class=\"token header-value\">//image.baidu.com/search/down?url=å›¾ç‰‡åœ°å€</span></span></pre></td></tr></table></figure><p>è¿›å…¥ <code>hexo</code>  -  <code>themes</code>  -  <code>shoka</code>  -  <code>scripts</code>  -  <code>helpers</code>   ï¼Œæ‰“å¼€ <code>engine.js</code>  æ–‡ä»¶</p>\n<p>å¤§æ¦‚ç¬¬ 30 è¡Œï¼Œä¿®æ”¹</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">parseImage</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">img<span class=\"token punctuation\">,</span> size</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token keyword\">return</span> img</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token string\">'https://image.baidu.com/search/down?url=https://tva'</span><span class=\"token operator\">+</span>randomServer<span class=\"token operator\">+</span><span class=\"token string\">'.sinaimg.cn/'</span><span class=\"token operator\">+</span>size<span class=\"token operator\">+</span><span class=\"token string\">'/'</span><span class=\"token operator\">+</span>img</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>é‡æ–° <code>hexo clean</code>   -&gt;  <code>hexo g</code>   -&gt;  <code>hexo d</code>  ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆåé—®é¢˜å¾—åˆ°è§£å†³</p>\n<h4 id=\"è¯„è®ºç³»ç»Ÿä¿®å¤\"><a class=\"anchor\" href=\"#è¯„è®ºç³»ç»Ÿä¿®å¤\">#</a> è¯„è®ºç³»ç»Ÿä¿®å¤</h4>\n<p><code>Shoka</code>  ä½¿ç”¨çš„é­”æ”¹ <code>valine</code>  ï¼Œ<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvTWluaVZhbGluZQ==\">GitHub</span> ä¸Šæ˜¾ç¤ºä¸Šä¸€æ¬¡ç»´æŠ¤è¿˜æ˜¯åœ¨ä¸‰å¹´å‰ï¼Œåœ¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb25zb2xlLmxlYW5jbG91ZC5hcHAv\"> LeanCloud</span> æ³¨å†Œå›½é™…ç‰ˆåï¼Œè¿›å…¥ <code>åº”ç”¨ç®¡ç†</code>  -  <code>åº”ç”¨å‡­è¯</code> å¾—åˆ° <code>AppID</code>  å’Œ <code>AppKey</code> ï¼Œå¡«å…¥ <code>Shoka</code>  çš„ <code>_config.yml</code>  ä¸­ï¼Œ</p>\n<p>ä½†æ˜¯å‘ç° <code>leanCloud</code>  ç›¸å…³çš„æ¥å£éƒ½æŠ¥é”™äº†ï¼Œåœ¨ <code>åº”ç”¨ç®¡ç†</code>  -  <code>å®‰å…¨ä¸­å¿ƒ</code> æ‰¾åˆ° <code>Web å®‰å…¨åŸŸå</code> ï¼Œå°†è‡ªå·±çš„åŸŸåå¡«è¿›å»åï¼Œå‘ç°ä¾ç„¶æŠ¥é”™ï¼ŒæŸ¥è¯¢åå‘ç°æ˜¯ <code>REST API æœåŠ¡å™¨åœ°å€</code> ä¸å¯¹ï¼Œä½¿ç”¨ç³»ç»Ÿæä¾›çš„ <code>AppID</code>  å‰å…«ä½çš„åŸŸåä¹Ÿæ˜¯æ²¡æœ‰æ•ˆæœã€‚</p>\n<p>ç›´æ¥åœ¨ <code>åº”ç”¨ç®¡ç†</code>  -  <code>åŸŸåç»‘å®š</code> ä¸­æ·»åŠ åŸŸå</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230518171418319.png\" alt=\"\" /></p>\n<p>åœ¨åŸŸåè§£æç®¡ç†åå°æ·»åŠ  CNAME éªŒè¯é€šè¿‡åï¼Œåœ¨ <code>Shoka</code>  çš„ <code>_config.yml</code>  ä¸­æ‰¾åˆ° <code>valine</code>  é…ç½®ç»„ï¼Œä¿®æ”¹ <code>serverURLs</code>  ä¸ºæˆ‘ä»¬çš„åŸŸåå³å¯ã€‚</p>\n<h4 id=\"éƒ¨ç½²åˆ°githubè‡ªå®šä¹‰åŸŸåç»‘å®š\"><a class=\"anchor\" href=\"#éƒ¨ç½²åˆ°githubè‡ªå®šä¹‰åŸŸåç»‘å®š\">#</a> éƒ¨ç½²åˆ° GitHub è‡ªå®šä¹‰åŸŸåç»‘å®š</h4>\n<p>åœ¨ GitHub ä»“åº“çš„ <code>Settings</code> -  <code>Pages</code>  ç•Œé¢çš„ <code>Custom domain</code>  å¡«å…¥è‡ªå·±çš„åŸŸåå <code>save</code></p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230518215309525.png\" alt=\"\" /></p>\n<p>å»åŸŸåè§£æç®¡ç†åå°æ·»åŠ  CNAME éªŒè¯é€šè¿‡åå°±å¯ä»¥é€šè¿‡åŸŸåè®¿é—®æˆ‘ä»¬çš„åšå®¢äº†ï¼Œä½†æ˜¯æ¯æ¬¡æ›´æ–°åšå®¢ï¼Œä½¿ç”¨ <code>hexo d</code>  éƒ¨ç½²åˆ° GitHubï¼Œå‘ç°åŸŸåæœ‰å¤±å»ç»‘å®šäº†ï¼Œéœ€è¦é‡æ–°ç»‘å®šï¼Œå¾ˆéº»çƒ¦ã€‚åœ¨ <code>Code</code>  æ ‡ç­¾é¡µæˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ª <code>CNAME</code>  æ–‡ä»¶ï¼Œé‡Œé¢å°±æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰åŸŸåã€‚</p>\n<p>åˆ° <code>hexo</code>  -  <code>source</code>  ç›®å½•ä¸‹æ–°å»º <code>CNAME</code>  æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å†™å…¥æˆ‘ä»¬çš„è‡ªå®šä¹‰åŸŸåï¼Œä¿å­˜ï¼Œæ–‡ä»¶å¦‚æœæœ‰åç¼€åï¼Œè®°å¾—å»æ‰ã€‚é‡æ–° <code>hexo clean</code>  -&gt;  <code>hexo g</code>  -&gt;  <code>hexo d</code>  åï¼Œè‡ªå®šä¹‰åŸŸåå°±ä¼šè‡ªåŠ¨åœ¨éƒ¨ç½²åˆ°æ—¶å€™å…³è”ä¸Š</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230518215916017.png\" alt=\"\" /></p>\n",
            "tags": [
                "æŠ˜è…¾",
                "Hexo",
                "åšå®¢"
            ]
        },
        {
            "id": "https://log992.cn/android/%E6%97%A0%E6%84%9F%E9%87%8D%E8%BD%BDActivity/",
            "url": "https://log992.cn/android/%E6%97%A0%E6%84%9F%E9%87%8D%E8%BD%BDActivity/",
            "title": "æ— æ„Ÿé‡è½½Activity",
            "date_published": "2023-04-14T10:02:55.000Z",
            "content_html": "<blockquote>\n<p>å¼€å‘æ—¶å¶å°”ä¼šé‡åˆ°éœ€è¦é‡è½½ç•Œé¢çš„æƒ…å†µï¼Œä½†æ˜¯å•çº¯çš„ <code>finish</code>  ä¼šæœ‰åŠ¨ç”»ï¼Œå¯¼è‡´ APP å±•ç°å¾ˆçªå…€ã€‚</p>\n</blockquote>\n<h3 id=\"å»æ‰åŠ¨ç”»æ•ˆæœ\"><a class=\"anchor\" href=\"#å»æ‰åŠ¨ç”»æ•ˆæœ\">#</a> å»æ‰åŠ¨ç”»æ•ˆæœ</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">overridePendingTransition</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">getIntent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token constant\">INTENT_KEY_START_FLAG</span><span class=\"token punctuation\">,</span><span class=\"token constant\">FLAG_RESTART_ACTIVITY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token constant\">INTENT_KEY_TABLE_ID</span><span class=\"token punctuation\">,</span>mTableId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>intent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span><span class=\"token constant\">INTENT_KEY_RESTART_BY</span><span class=\"token punctuation\">,</span>onlySave<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">overridePendingTransition</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å¯ä»¥åœ¨æ·»åŠ å‚æ•°åœ¨é‡æ–°å¯åŠ¨ååšä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚</p>\n",
            "tags": [
                "Android",
                "Activity",
                "é‡è½½"
            ]
        },
        {
            "id": "https://log992.cn/android/%E6%82%AC%E6%B5%AE%E7%AA%97%E6%9D%83%E9%99%90%E8%8E%B7%E5%8F%96/",
            "url": "https://log992.cn/android/%E6%82%AC%E6%B5%AE%E7%AA%97%E6%9D%83%E9%99%90%E8%8E%B7%E5%8F%96/",
            "title": "æ‚¬æµ®çª—æƒé™è·å–",
            "date_published": "2023-04-04T09:54:55.000Z",
            "content_html": "<blockquote>\n<p>åšä¸€ä¸ªåº”ç”¨ Log çš„å®æ—¶æ˜¾ç¤ºï¼Œå‘ç°éœ€è¦ç”¨åˆ° <code>SYSTEM_ALERT_WINDOW</code>  æƒé™ï¼Œè§†åŒé€šç”¨æ–¹å¼è·å–åå‘ç°å¹¶ä¸è¡Œã€‚</p>\n</blockquote>\n<h3 id=\"æ™®é€šæƒé™è·å–æµç¨‹\"><a class=\"anchor\" href=\"#æ™®é€šæƒé™è·å–æµç¨‹\">#</a> æ™®é€šæƒé™è·å–æµç¨‹</h3>\n<p>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­é‡‡ç”¨çš„æ˜¯<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Blcm1pc3Npb25zLWRpc3BhdGNoZXIvUGVybWlzc2lvbnNEaXNwYXRjaGVy\"> PermissionsDispatcher</span>, ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ç±»ä¸Šæ³¨è§£ <code>@RuntimePermissions</code>  , å†™ä¸€ä¸ª <code>public void</code>  çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>initAfterPermissionChecked</code> , æ­¤æ–¹æ³•ä¸­å†™æƒé™è·å–åçš„æ“ä½œå³å¯ï¼Œæ–¹æ³•ä¸Šç”¨ <code>@NeedsPermission(Manifest.permission.CAMERA)</code>  æ³¨è§£å³å¯ï¼Œå¤šä¸ªæƒé™å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@NeedsPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token class-name\">Manifest</span><span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">READ_EXTERNAL_STORAGE</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Manifest</span><span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">WRITE_EXTERNAL_STORAGE</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Manifest</span><span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">ACCESS_COARSE_LOCATION</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Manifest</span><span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">ACCESS_FINE_LOCATION</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ç¼–è¯‘ä»£ç åè‡ªåŠ¨ç”Ÿæˆ <code>ç±»å + PermissionsDispatcher</code>  çš„ Java æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>LaunchActivityPermissionsDispatcher</code> , åœ¨éœ€è¦è·å–æƒé™çš„åœ°æ–¹ç›´æ¥è°ƒç”¨ <code>æ–¹æ³•å + WithPermissionCheck(this);</code>  ç”Ÿæˆçš„ Java æ–‡ä»¶ä¸­å·²ç»ç»™ä½ ç”Ÿæˆå¥½äº†è¿™ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ <code>initAfterPermissionCheckedWithPermissionCheck()</code> , å…¶ä»–é’ˆå¯¹å„ç§æˆæƒä¸å¦çš„å¤„ç†å°±ä¸ç»†è¯´äº†ã€‚</p>\n<h3 id=\"é—®é¢˜\"><a class=\"anchor\" href=\"#é—®é¢˜\">#</a> é—®é¢˜</h3>\n<p>å¯¹äº <code>SYSTEM_ALERT_WINDOW</code>  æƒé™ï¼Œæˆ‘æœ¬æƒ³é‡‡ç”¨ç›¸åŒçš„æ–¹æ³•å¤„ç†ï¼Œç›´æ¥åœ¨æƒé™åˆ—è¡¨ååŠ å…¥ <code>Manifest.permission.SYSTEM_ALERT_WINDOW</code> ï¼Œç»“æœç¼–è¯‘åç›´æ¥æŠ¥é”™</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Method</span> '<span class=\"token function\">initAfterPermissionChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>' defines 'android<span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">SYSTEM_ALERT_WINDOW</span>' <span class=\"token keyword\">with</span> <span class=\"token namespace\">other</span> permissions at the same time<span class=\"token punctuation\">.</span></pre></td></tr></table></figure><p>æ ¹æ®è¿™ä¸ª<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Blcm1pc3Npb25zLWRpc3BhdGNoZXIvUGVybWlzc2lvbnNEaXNwYXRjaGVyL2lzc3Vlcy80MzE=\"> issues</span></p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230404173844161.png\" alt=\"\" /></p>\n<p>å¤§æ¦‚æ„æ€å°±æ˜¯ <code>WRITE_SETTINGS</code>  å’Œ <code>SYSTEM_ALERT_WINDOW</code>  è¿™ç±»æƒé™ä¸èƒ½ä½œä¸ºæ™®é€šæƒé™ç”³è¯·æµç¨‹çš„ä¸€éƒ¨åˆ†ä¸€èµ·ç”³è¯·ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€èˆ¬éœ€è¦é‡æ–°è·³è½¬åˆ°è®¾ç½®ç•Œé¢å»æˆäºˆæƒé™ã€‚</p>\n<h3 id=\"è§£å†³\"><a class=\"anchor\" href=\"#è§£å†³\">#</a> è§£å†³</h3>\n<p>åœ¨æ–°çš„ç±»ä¸­è·å– <code>SYSTEM_ALERT_WINDOW</code>  æƒé™ï¼ŒåŒæ ·çš„æµç¨‹ï¼Œç±»åä¸Šæ³¨è§£ <code>@RuntimePermissions</code>  ï¼Œæ–°å»º <code>public void </code> æ–¹æ³•å¹¶æ³¨è§£ <code>@NeedsPermission(Manifest.permission.SYSTEM_ALERT_WINDOW)</code> ï¼Œè¿™é‡Œæˆ‘å†™çš„æ˜¯</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@NeedsPermission</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Manifest</span><span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">SYSTEM_ALERT_WINDOW</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkSystemAlertPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è·å–æƒé™åˆ°åœ°æ–¹ç›´æ¥ç”¨çš„</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">LoginActivityPermissionsDispatcher</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkSystemAlertPermissionWithPermissionCheck</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>è·å–ã€‚ç¼–è¯‘è¿è¡Œåå‘ç°å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è¿™ä¸ªæƒé™ä¼šç›´æ¥è·³è½¬åˆ°è®¾ç½®ç•Œé¢ï¼Œæˆ‘ä»¬éœ€è¦ç»™ä¸ª <code>Dialog</code>  è®©ç”¨æˆ·é€‰æ‹©</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">new</span> <span class=\"token class-name\">AlertDialog<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æç¤º\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ˜¾ç¤ºLogéœ€è¦åœ¨è®¾ç½®ä¸­æ‰“å¼€ç³»ç»Ÿæ‚¬æµ®çª—æƒé™ï¼Œæ˜¯å¦æ‰“å¼€ï¼Ÿ\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setPositiveButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç¡®å®š\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>dialog<span class=\"token punctuation\">,</span> which<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                        <span class=\"token class-name\">LoginActivityPermissionsDispatcher</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkSystemAlertPermissionWithPermissionCheck</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                        dialog<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setNegativeButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å–æ¶ˆ\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>dialog<span class=\"token punctuation\">,</span> which<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                        dialog<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æˆ‘ä»¬åŒæ ·ä¸èƒ½å†è¿›å…¥çš„æ—¶å€™æ¯æ¬¡éƒ½å¼¹çª—è®©ç”¨æˆ·é€‰æ‹©ï¼Œæ¯•ç«Ÿè¯¥æƒé™å¯èƒ½å·²ç»æˆäºˆäº†ã€‚äºæ˜¯æˆ‘é€‰æ‹©äº†ä½¿ç”¨ <code>ContextCompat</code>  æˆ–è€… <code>PermissionChecker</code>  çš„ <code>checkSelfPermission()</code>  æ–¹æ³•æ¥æ ¡éªŒå½“å‰æƒé™æ˜¯å¦è·å–åˆ°ï¼Œä½†æ˜¯æ¯æ¬¡è·å–çš„å€¼éƒ½æ˜¯ <code>PackageManager.PERMISSION_DENIED</code> , äºæ˜¯æˆ‘ä»¬é‡‡ç”¨å¦ä¸€ç§æ–¹æ³•å»è·å–æƒé™æ˜¯å¦æˆäºˆ</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Settings</span><span class=\"token punctuation\">.</span><span class=\"token function\">canDrawOverlays</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>æ–¹æ³•æ³¨é‡Šå¦‚ä¸‹</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230404175013624.png\" alt=\"\" /></p>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±èƒ½æ­£å¸¸è·å– <code>SYSTEM_ALERT_WINDOW</code>  æƒé™äº†</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">Settings</span><span class=\"token punctuation\">.</span><span class=\"token function\">canDrawOverlays</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>            <span class=\"token keyword\">new</span> <span class=\"token class-name\">AlertDialog<span class=\"token punctuation\">.</span>Builder</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æç¤º\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ˜¾ç¤ºLogéœ€è¦åœ¨è®¾ç½®ä¸­æ‰“å¼€ç³»ç»Ÿæ‚¬æµ®çª—æƒé™ï¼Œæ˜¯å¦æ‰“å¼€ï¼Ÿ\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setPositiveButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç¡®å®š\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>dialog<span class=\"token punctuation\">,</span> which<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                        <span class=\"token class-name\">LoginActivityPermissionsDispatcher</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkSystemAlertPermissionWithPermissionCheck</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                        dialog<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">setNegativeButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å–æ¶ˆ\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>dialog<span class=\"token punctuation\">,</span> which<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                        dialog<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "Android",
                "æƒé™"
            ]
        },
        {
            "id": "https://log992.cn/android/Bitmap%E6%93%8D%E4%BD%9C%E5%83%8F%E7%B4%A0/",
            "url": "https://log992.cn/android/Bitmap%E6%93%8D%E4%BD%9C%E5%83%8F%E7%B4%A0/",
            "title": "Bitmapæ“ä½œåƒç´ ",
            "date_published": "2023-03-23T05:45:55.000Z",
            "content_html": "<blockquote>\n<p>æœ€è¿‘åœ¨åšå…¬å¸é¡¹ç›®æ—¶ï¼Œéœ€è¦å¯¹ bitmap é‡æ–°è®¡ç®—åƒç´ ç‚¹é¢œè‰²ï¼Œåœ¨ <code>onDraw()</code>  ä¸­å¤„ç†æ—¶ï¼Œè®°å½•äº†ä»¥ä¸‹æ–¹æ³•ã€‚</p>\n</blockquote>\n<h3 id=\"setpixelæ–¹æ³•\"><a class=\"anchor\" href=\"#setpixelæ–¹æ³•\">#</a> setPixel æ–¹æ³•</h3>\n<p>æˆ‘ä»¬é¦–å…ˆéå† bitmap æ‰€æœ‰çš„åƒç´ ç‚¹ï¼Œé€šè¿‡ <code>getPixel()</code>  è·å–å½“å‰åƒç´ ç‚¹çš„é¢œè‰²ï¼Œç„¶åæ ¹æ®ç‰¹å®šç®—æ³•ï¼Œè®¡ç®—å‡ºæœ€ç»ˆåº”è¯¥å±•ç¤ºçš„å®é™…é¢œè‰²ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> y1<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> y2<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> x2<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> x1<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                <span class=\"token keyword\">int</span> oldColor <span class=\"token operator\">=</span> compositeBitmap<span class=\"token punctuation\">.</span><span class=\"token function\">getPixel</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                <span class=\"token keyword\">int</span> alpha <span class=\"token operator\">=</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">alpha</span><span class=\"token punctuation\">(</span>oldColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                <span class=\"token keyword\">int</span> defaultAlpha <span class=\"token operator\">=</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">alpha</span><span class=\"token punctuation\">(</span>defaultColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>alpha <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token keyword\">int</span> rollPass <span class=\"token operator\">=</span> <span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>alpha <span class=\"token operator\">/</span> defaultAlpha<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rollPass <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rollPass <span class=\"token operator\">></span> mMaxRollPass<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    rollPass <span class=\"token operator\">=</span> mMaxRollPass<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token comment\">//region è®¡ç®—é¢ç§¯</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token class-name\">Integer</span> area <span class=\"token operator\">=</span> mTrackPointAreaMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>rollPass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>area <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                    area <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                area<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                mTrackPointAreaMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>rollPass<span class=\"token punctuation\">,</span> area<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token comment\">//endregion</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token keyword\">int</span> newColor <span class=\"token operator\">=</span> <span class=\"token class-name\">RollingMonitorUtil<span class=\"token punctuation\">.</span>GetMappingColor</span><span class=\"token punctuation\">(</span>mCurrentMode <span class=\"token operator\">==</span> <span class=\"token constant\">MODE_ROLLING</span> <span class=\"token operator\">?</span> mMaxRollPass <span class=\"token operator\">:</span> mMaxVibrateRollPass<span class=\"token punctuation\">,</span> rollPass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                compositeBitmap<span class=\"token punctuation\">.</span><span class=\"token function\">setPixel</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">,</span> newColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åœ¨åƒç´ è¾ƒå¤šæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚</p>\n<h3 id=\"copypixelstobufferæ–¹æ³•\"><a class=\"anchor\" href=\"#copypixelstobufferæ–¹æ³•\">#</a> copyPixelsToBuffer æ–¹æ³•</h3>\n<p>åœ¨ C# ä¸­æœ‰ <code>LockBits</code>  æ–¹æ³•åŠ å¿«é€Ÿåº¦ï¼Œåœ¨ Android ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>copyPixelsToBuffer</code>  å’Œ <code>copyPixelsFromBuffer</code>  æ¥åŠ é€Ÿåƒç´ æ“ä½œã€‚</p>\n<p>æŸ¥çœ‹æºç ï¼Œæˆ‘ä»¬çœ‹åˆ°æœ€ä¸»è¦çš„å…¶å®æ˜¯è¿™ä¸ªæ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">nativeCopyPixelsToBuffer</span><span class=\"token punctuation\">(</span>mNativePtr<span class=\"token punctuation\">,</span> dst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">native</span> <span class=\"token keyword\">void</span> <span class=\"token function\">nativeCopyPixelsToBuffer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> nativeBitmap<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                                                        <span class=\"token class-name\">Buffer</span> dst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å®ƒæ˜¯ä¸€ä¸ª <code>native</code>  ä¿®é¥°çš„æ–¹æ³•ï¼Œå³ <code>JNI</code>  è°ƒç”¨çš„æ–¹æ³•ï¼Œä½¿ç”¨åº•å±‚è°ƒç”¨æ•ˆç‡æ›´é«˜ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> size <span class=\"token operator\">=</span> compositeBitmap<span class=\"token punctuation\">.</span><span class=\"token function\">getRowBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> compositeBitmap<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token class-name\">ByteBuffer</span> buf <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        compositeBitmap<span class=\"token punctuation\">.</span><span class=\"token function\">copyPixelsToBuffer</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> byt <span class=\"token operator\">=</span> buf<span class=\"token punctuation\">.</span><span class=\"token function\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">int</span> defaultAlpha <span class=\"token operator\">=</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">alpha</span><span class=\"token punctuation\">(</span>defaultColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> ctr <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> ctr <span class=\"token operator\">&lt;</span> size<span class=\"token punctuation\">;</span> ctr <span class=\"token operator\">+=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token comment\">//access array in form of argb. for ex. byt[0] is 'r', byt[1] is 'g' and so on..</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">int</span> r <span class=\"token operator\">=</span> byt<span class=\"token punctuation\">[</span>ctr<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xff</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">int</span> g <span class=\"token operator\">=</span> byt<span class=\"token punctuation\">[</span>ctr <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xff</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> byt<span class=\"token punctuation\">[</span>ctr <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xff</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> byt<span class=\"token punctuation\">[</span>ctr <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xff</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">int</span> rollPass <span class=\"token operator\">=</span> <span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">/</span> defaultAlpha<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rollPass <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">int</span> maxRollPass <span class=\"token operator\">=</span> mCurrentMode <span class=\"token operator\">==</span> <span class=\"token constant\">MODE_ROLLING</span> <span class=\"token operator\">?</span> mMaxRollPass <span class=\"token operator\">:</span> mMaxVibrateRollPass<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rollPass <span class=\"token operator\">></span> maxRollPass<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                rollPass <span class=\"token operator\">=</span> maxRollPass<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token comment\">//region è®¡ç®—é¢ç§¯</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token class-name\">Integer</span> area <span class=\"token operator\">=</span> mTrackPointAreaMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>rollPass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>area <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                area <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            area<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            mTrackPointAreaMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>rollPass<span class=\"token punctuation\">,</span> area<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">int</span> newColor <span class=\"token operator\">=</span> mCurrentMode <span class=\"token operator\">==</span> <span class=\"token constant\">MODE_ROLLING</span> <span class=\"token operator\">?</span> mRollColorPalette<span class=\"token punctuation\">[</span>rollPass<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> mVibrateColorPalette<span class=\"token punctuation\">[</span>rollPass<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            byt<span class=\"token punctuation\">[</span>ctr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>newColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            byt<span class=\"token punctuation\">[</span>ctr <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span>newColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            byt<span class=\"token punctuation\">[</span>ctr <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">blue</span><span class=\"token punctuation\">(</span>newColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            byt<span class=\"token punctuation\">[</span>ctr <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">.</span><span class=\"token function\">alpha</span><span class=\"token punctuation\">(</span>newColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token class-name\">ByteBuffer</span> retBuf <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">wrap</span><span class=\"token punctuation\">(</span>byt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        compositeBitmap<span class=\"token punctuation\">.</span><span class=\"token function\">copyPixelsFromBuffer</span><span class=\"token punctuation\">(</span>retBuf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘æ„å»ºçš„ bitmap é‡‡ç”¨çš„æ˜¯ä»¥ä¸‹æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Bitmap</span> compositeBitmap <span class=\"token operator\">=</span> <span class=\"token class-name\">Bitmap</span><span class=\"token punctuation\">.</span><span class=\"token function\">createBitmap</span><span class=\"token punctuation\">(</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Bitmap<span class=\"token punctuation\">.</span>Config</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ARGB_8888</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨äº† ARGB_8888ï¼Œæ¯ä¸ªåƒç´ å äº† 4 ä½ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•è·å–æ•°ç»„å¤§å°ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>bitmap<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> bitmap<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span></pre></td></tr></table></figure><p>å¾ªç¯éå†åå–åˆ° RGB å’Œç›¸åº”çš„é€æ˜åº¦ï¼Œç„¶åå°±å¯ä»¥é’ˆå¯¹å½“å‰çš„é¢œè‰²åšç»Ÿè®¡æˆ–è€…æ˜¯æ‰¹é‡è½¬æ¢æ“ä½œäº†ã€‚</p>\n",
            "tags": [
                "Android",
                "bitmap",
                "åƒç´ "
            ]
        },
        {
            "id": "https://log992.cn/android/ADB%E5%91%BD%E4%BB%A4%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/",
            "url": "https://log992.cn/android/ADB%E5%91%BD%E4%BB%A4%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/",
            "title": "ADBå‘½ä»¤ç®€å•ä½¿ç”¨",
            "date_published": "2023-02-09T03:18:55.000Z",
            "content_html": "<h4 id=\"æŸ¥çœ‹å½“å‰è¿æ¥çš„è®¾å¤‡\"><a class=\"anchor\" href=\"#æŸ¥çœ‹å½“å‰è¿æ¥çš„è®¾å¤‡\">#</a> æŸ¥çœ‹å½“å‰è¿æ¥çš„è®¾å¤‡</h4>\n<blockquote>\n<p>adb devices</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/2020/10/1772551834.png\" alt=\"\" /><br />\nå¯ä»¥çœ‹åˆ°ç›®å‰æˆ‘çš„ç”µè„‘è¿æ¥äº†ä¸¤ä¸ªè®¾å¤‡</p>\n<h4 id=\"å®‰è£…-ç”µè„‘ä¸Šçš„apk\"><a class=\"anchor\" href=\"#å®‰è£…-ç”µè„‘ä¸Šçš„apk\">#</a> å®‰è£… ç”µè„‘ä¸Šçš„ apk</h4>\n<blockquote>\n<p>adb intall XXXX</p>\n</blockquote>\n<p>XXXX ä»£è¡¨ apk è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥æ‹–è¿›æ¥<br />\n<img data-src=\"https://image.log1992.com/2020/10/183797954.png\" alt=\"\" /><br />\nä¸€èˆ¬æ¥è¯´ Performing Streamed Install çš„æ—¶å€™éœ€è¦ä½ åœ¨è®¾å¤‡ä¸Šæ‰‹åŠ¨ç¡®è®¤æ˜¯å¦å®‰è£…</p>\n<h4 id=\"å¤šè®¾å¤‡å®‰è£…-apk\"><a class=\"anchor\" href=\"#å¤šè®¾å¤‡å®‰è£…-apk\">#</a> å¤šè®¾å¤‡å®‰è£… apk</h4>\n<blockquote>\n<p>adb -s deviceId install XXXX</p>\n</blockquote>\n<p>1.devceId å¯ä»¥é€šè¿‡ adb devices è·å¾—<br />\n 2.XXXX ä»£è¡¨ apk è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥æ‹–è¿›æ¥<br />\nå½“ä½ ç”µè„‘è¿æ¥ äº† å¤šä¸ªè®¾å¤‡çš„æ—¶å€™ï¼Œç”¨ adb install å‘½ä»¤å®‰è£…ä¼šæŠ¥é”™<br />\n<img data-src=\"https://image.log1992.com/2020/10/1643299931.png\" alt=\"\" /><br />\næ­¤æ—¶éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šç›¸åº”çš„è®¾å¤‡æ¥å®‰è£…<br />\n<img data-src=\"https://image.log1992.com/2020/10/644570005.png\" alt=\"\" /></p>\n<h4 id=\"å¸è½½\"><a class=\"anchor\" href=\"#å¸è½½\">#</a> å¸è½½</h4>\n<blockquote>\n<p>adb uninstall applicationId</p>\n</blockquote>\n<p>applicationId ä¸ºå½“å‰ APP çš„ applicationId<br />\n ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é•¿æŒ‰æ¡Œé¢çš„å›¾æ ‡æˆ–è€…æ‹–åŠ¨å¸è½½å½“å‰çš„ APPï¼Œä½†æ˜¯å¶å°”ä¼šé‡åˆ°å¸è½½ä¸å¹²å‡€çš„æƒ…å†µï¼Œç±»ä¼¼åä¸ºæ‰‹æœºå¼€äº†ç³»ç»Ÿåˆ†èº«è¿™ç§ï¼Œå†æ¬¡å®‰è£…çš„æ—¶å€™ä¼šæç¤º APP å·²å­˜åœ¨ï¼Œæ— æ³• å®‰è£…ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡å‘½ä»¤æ¥å°†å…¶å¸è½½å¹²å‡€<br />\n<img data-src=\"https://image.log1992.com/2020/10/3228692174.png\" alt=\"\" /><br />\nå½“ç„¶ï¼Œå¦‚æœä½ æ˜¯å¤šè®¾å¤‡çš„è¯ï¼Œåˆ«å¿˜äº†åœ¨ adb åé¢æ·»åŠ  -s deviceId æ¥é€‰æ‹©å¸è½½ç‰¹å®šè®¾å¤‡ä¸Šçš„è¯¥ APP</p>\n<h4 id=\"ä¼ è¾“æ–‡ä»¶\"><a class=\"anchor\" href=\"#ä¼ è¾“æ–‡ä»¶\">#</a> ä¼ è¾“æ–‡ä»¶</h4>\n<ol>\n<li>\n<p>ä»ç”µè„‘ä¼ è¾“åˆ°è®¾å¤‡</p>\n<blockquote>\n<p>adb push æ–‡ä»¶å…¨è·¯å¾„ /sdcard/ ç›®æ ‡è·¯å¾„</p>\n</blockquote>\n<p>ä¸€èˆ¬æ¥è¯´åœ¨è°ƒç”¨ <code>adb install</code>  æ—¶ï¼Œå†…éƒ¨ä¼šå…ˆå°† apk æ–‡ä»¶æ¨é€åˆ°è®¾å¤‡çš„ä¸´æ—¶æ–‡ä»¶å¤¹å†…ï¼Œå†æ‰§è¡Œå®‰è£…</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209105558678.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>ä»è®¾å¤‡ä¼ è¾“åˆ°ç”µè„‘</p>\n<blockquote>\n<p>adb pull /sdcard/ æ–‡ä»¶è·¯å¾„ ç”µè„‘ç«¯å­˜æ”¾è·¯å¾„</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209105822952.png\" alt=\"\" /></p>\n</li>\n</ol>\n<h4 id=\"æ“ä½œè®¾å¤‡åº”ç”¨\"><a class=\"anchor\" href=\"#æ“ä½œè®¾å¤‡åº”ç”¨\">#</a> æ“ä½œè®¾å¤‡åº”ç”¨</h4>\n<ol>\n<li>\n<p>æ¸…é™¤ç¼“å­˜æ•°æ®</p>\n<blockquote>\n<p>adb shell pm clear åŒ…å</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209110416889.png\" alt=\"\" /></p>\n<p>è¿™ä¸ªä¼šæ¸…é™¤åº”ç”¨æ‰€æœ‰æ•°æ®</p>\n</li>\n<li>\n<p>åˆ é™¤è®¾å¤‡æ–‡ä»¶</p>\n<blockquote>\n<p>adb shell rm /sdcard/ æ–‡ä»¶è·¯å¾„ -f</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209110442562.png\" alt=\"\" /></p>\n<p>è¿™ä¸ªä¸ä¼šå‡ºç° success æç¤º</p>\n</li>\n<li>\n<p>è·å–è®¾å¤‡åˆ†è¾¨ç‡</p>\n<blockquote>\n<p>adb shell vm size</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209111738141.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>è·å–å±å¹•å¯†åº¦</p>\n<blockquote>\n<p>adb shell wm density</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209110648500.png\" alt=\"\" /></p>\n</li>\n</ol>\n<blockquote>\n<p>è¿˜æœ‰å¾ˆå¤š <code>adb shell pm</code>  ç›¸å…³çš„æ“ä½œï¼Œå…·ä½“å¯çœ‹ä¸‹å›¾</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230209110858336.png\" alt=\"\" /></p>\n",
            "tags": [
                "Android",
                "adb"
            ]
        },
        {
            "id": "https://log992.cn/play/Monterey%E5%B1%8F%E8%94%BD%E6%9B%B4%E6%96%B0/",
            "url": "https://log992.cn/play/Monterey%E5%B1%8F%E8%94%BD%E6%9B%B4%E6%96%B0/",
            "title": "Montereyå±è”½æ›´æ–°",
            "date_published": "2023-01-08T05:11:55.000Z",
            "content_html": "<blockquote>\n<p>æœ€è¿‘ç³»ç»Ÿæ›´æ–°åˆ° Venturaï¼Œå„ç§ç”¨ç€ç”¨ç€è½¬åœˆåœˆï¼Œå¿…é¡»é‡å¯æ‰èƒ½æ¢å¤æ­£å¸¸ï¼Œäºæ˜¯ä¸€æ€’ä¹‹ä¸‹é‡æ–°å®‰è£…äº† Montereyï¼Œæ²¡æœ‰ Time Machine å¤‡ä»½ï¼Œè¿‡ç¨‹å¾ˆéš¾å—ã€‚å®‰è£…å¥½åæˆ‘ä»¬å°†ç³»ç»Ÿå‡çº§å±è”½æ‰ã€‚</p>\n</blockquote>\n<h3 id=\"ç®€å•ä½¿ç”¨hostå±è”½\"><a class=\"anchor\" href=\"#ç®€å•ä½¿ç”¨hostå±è”½\">#</a> ç®€å•ä½¿ç”¨ host å±è”½</h3>\n<p>Mac çš„ host æ–‡ä»¶å­˜åœ¨äº <code>/private/etc/hosts</code>  ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç›´æ¥ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œå¯ä»¥å°†æ–‡ä»¶æ‹·è´å‡ºæ¥åä¿®æ”¹ï¼Œç„¶åå¤åˆ¶è¿›å»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç»ˆç«¯è¿›è¡Œæ“ä½œã€‚</p>\n<ol>\n<li>\n<p>ä½¿ç”¨å‘½ä»¤</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /private/etc/hosts</pre></td></tr></table></figure><p>ä½¿ç”¨ nano ç¼–è¾‘å™¨å•çº¯æ˜¯æ¯”è¾ƒä¹ æƒ¯è¿™ä¸ªï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ vim</p>\n<p>å¤åˆ¶ä»¥ä¸‹ä»£ç è¿›å»</p>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">## Mac Software Update (sysin)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>127.0.0.1 swdist.apple.com</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>127.0.0.1 swscan.apple.com</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>127.0.0.1 swcdn.apple.com</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>127.0.0.1 gdmf.apple.com</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>127.0.0.1 mesu.apple.com</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>127.0.0.1 xp.apple.com</pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20230108121753352.png\" alt=\"\" /></p>\n<p>Ctrl + x ä¿å­˜åå³å¯</p>\n</li>\n<li>\n<p>ä½¿ç”¨è½¯ä»¶<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29sZGovU3dpdGNoSG9zdHM=\"> SwitchHosts</span></p>\n<p>åœ¨ GitHub çš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29sZGovU3dpdGNoSG9zdHMvcmVsZWFzZXM=\"> release ç•Œé¢</span>ä¸‹è½½å¯¹åº”è‡ªå·±è®¾å¤‡çš„å®‰è£…åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½çš„æ˜¯<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29sZGovU3dpdGNoSG9zdHMvcmVsZWFzZXMvZG93bmxvYWQvdjQuMS4yL1N3aXRjaEhvc3RzX21hY19hcm02NF80LjEuMi42MDg2LmRtZw==\"> SwitchHosts_mac_arm64_4.1.2.6086.dmg</span></p>\n<p>å®‰è£…å®Œæˆåæ‰“å¼€è½¯ä»¶ï¼Œå·¦ä¸Šè§’ + æ–°å»ºä¸€ä¸ª</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108122238085.png\" alt=\"\" /></p>\n<p>æœ€åæ‰“å¼€å³ä¾§å°å¼€å…³å³å¯</p>\n<p>é€šè¿‡ host å±è”½æ›´æ–°ä¼šæ˜¾ç¤ºå¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108122403423.png\" alt=\"\" /></p>\n</li>\n</ol>\n<h3 id=\"æ¸…é™¤ç³»ç»Ÿæ›´æ–°æ ‡è®°\"><a class=\"anchor\" href=\"#æ¸…é™¤ç³»ç»Ÿæ›´æ–°æ ‡è®°\">#</a> æ¸…é™¤ç³»ç»Ÿæ›´æ–°æ ‡è®°</h3>\n<ol>\n<li>\n<p>ä¸´æ—¶æ¸…é™¤ç³»ç»Ÿæ›´æ–°æ ‡è®°</p>\n<p>å¦‚æœå·²ç»æ£€æµ‹åˆ°æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä¸´æ—¶å»é™¤æ›´æ–°é€šçŸ¥æ ‡è®°ã€‚</p>\n<p>æ‰“å¼€ â€œç»ˆç«¯â€ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>defaults <span class=\"token function\">write</span> com.apple.systempreferences AttentionPrefBundleIDs <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Killall Dock</pre></td></tr></table></figure><p>å°çº¢ç‚¹å°±æ¶ˆå¤±äº†</p>\n<p>ä½†æ˜¯åœ¨ Monterey ä¸­ï¼Œå†æ¬¡è¿›å…¥ç³»ç»Ÿæ›´æ–°ï¼Œè™½ç„¶ä¸ä¼šæç¤ºæ›´æ–°ï¼Œä½†æ˜¯å°çº¢ç‚¹ä¼šé‡å¤å‡ºç°</p>\n</li>\n<li>\n<p>ä¿®æ”¹æƒé™</p>\n<ol>\n<li>\n<p>ç¡®ä¿ FileVault å·²ç»ç¦ç”¨ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰ï¼Œåœ¨ â€ï£¿ &gt;&gt; ç³»ç»Ÿåå¥½è®¾ç½®â€¦ &gt;&gt; å®‰å…¨æ€§å’Œéšç§ &gt;&gt; æ–‡ä»¶ä¿é™©ç®±â€ æŸ¥çœ‹ç¡®è®¤ã€‚</p>\n</li>\n<li>\n<p>å…³æœºçŠ¶æ€ä¸‹ï¼Œé•¿æŒ‰å¼€æœºé”®ï¼Œå‡ºç°è®¾ç½®é€‰é¡¹åæ¾å¼€ï¼Œé€‰ä¸­é€‰é¡¹å›¾æ ‡ï¼Œç‚¹å‡»ç»§ç»­ï¼Œè¿›å…¥åé€‰æ‹©å½“å‰è´¦æˆ·ï¼Œè¾“å…¥å¯†ç ï¼Œè§£é”åç‚¹å‡»å·¦ä¸Šè§’å®ç”¨å·¥å…·ï¼Œé€‰æ‹©ç»ˆç«¯ã€‚</p>\n</li>\n<li>\n<p>é¦–å…ˆæŸ¥çœ‹ <code>csrutil</code>  çŠ¶æ€</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>csrutil status</pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20230108124204956.png\" alt=\"\" /></p>\n<p>è¿™ä¸ªæ˜¯æˆ‘å·²ç»å…³é—­äº†çš„ï¼Œæ²¡æœ‰å…³é—­æœ€åå°±æ˜¯ç°å® enabled</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>csrutil disable</pre></td></tr></table></figure><p>ç­‰å¾…ä¸¤ä¸‰ç§’ï¼Œå°±ä¼šæç¤ºå…³é—­æˆåŠŸ</p>\n<p>å†å°† <code>authenticated-root</code>  å…³é—­</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>csrutil authenticated-root disable</pre></td></tr></table></figure><p>ä¸å…³è¿™ä¸ªåˆ›å»ºå¿«ç…§çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108124721068.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>æ­£å¸¸é‡å¯åˆ° macOS</p>\n</li>\n<li>\n<p>é€šè¿‡æ‰§è¡Œ  <code>mount</code>  å‘½ä»¤æŸ¥æ‰¾è¦æŒ‚è½½çš„è®¾å¤‡</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108124820195.png\" alt=\"\" /></p>\n<p>çœ‹åˆ°ç¬¬ä¸€è¡Œçš„æ ¹ç›®å½•å¯¹åº”çš„æ˜¯ <code>/dev/disk3s31</code> ï¼Œé‚£ä¹ˆåº”è¯¥æŒ‚è½½çš„è®¾å¤‡åç§°æ˜¯  <code>/dev/disk3s3</code> ï¼Œs1 è¡¨ç¤º â€œSnapshot 1â€ï¼ˆAPFS å¿«ç…§ï¼‰</p>\n</li>\n<li>\n<p>åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ç”¨äºæŒ‚è½½ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º</p>\n<p>ä¾‹å¦‚ï¼š~/mount</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> <span class=\"token parameter variable\">-m777</span> ~/mount</pre></td></tr></table></figure></li>\n<li>\n<p>æ‰§è¡ŒæŒ‚è½½</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">mount</span> <span class=\"token parameter variable\">-o</span> nobrowse <span class=\"token parameter variable\">-t</span> apfs /dev/disk3s3 ~/mount</pre></td></tr></table></figure><p>åé¢ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯æˆ‘ä»¬åˆšåˆšæŸ¥åˆ°çš„æŒ‚è½½ç›®å½•å’Œåˆ›å»ºçš„æ–°ç›®å½•</p>\n</li>\n<li>\n<p>åœ¨æ–°ç›®å½•ä¸‹ä¿®æ”¹æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> ~/mount</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token number\">644</span> System/Library/PrivateFrameworks/SoftwareUpdate.framework/Versions/A/Resources/SoftwareUpdateNotificationManager.app/Contents/MacOS/SoftwareUpdateNotificationManager</pre></td></tr></table></figure></li>\n<li>\n<p>æ‰§è¡Œ <code>sudo bless --folder ~/mount/System/Library/CoreServices --bootefi --create-snapshot</code></p>\n<p>æ³¨æ„ï¼Œè¿™é‡Œè¦å…ˆæŒ‚è½½åå†æ‰§è¡Œï¼Œç›´æ¥æ‰§è¡Œä¼šæŠ¥é”™æ‰¾ä¸åˆ°èŠ‚ç‚¹</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108125541075.png\" alt=\"\" /></p>\n<p><strong>åœ¨ M èŠ¯ç‰‡çš„ Mac ä¸Šï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨ä¸Šè¿°å‘½ä»¤å®Œæˆå¿«ç…§ç”Ÿæˆ</strong></p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108125827753.png\" alt=\"\" /></p>\n<p><strong>æˆ‘ä»¬éœ€è¦ç”¨åˆ°ä»¥ä¸‹å‘½ä»¤ï¼š</strong></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> bless <span class=\"token parameter variable\">--mount</span> ~/mount/System/Library/CoreServices/ <span class=\"token parameter variable\">--setBoot</span> --create-snapshot</pre></td></tr></table></figure></li>\n<li>\n<p>é‡å¯ç”µè„‘</p>\n</li>\n<li>\n<p>éªŒè¯</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ls</span> <span class=\"token parameter variable\">-l</span> /System/Library/PrivateFrameworks/SoftwareUpdate.framework/Versions/A/Resources/SoftwareUpdateNotificationManager.app/Contents/MacOS/SoftwareUpdateNotificationManager</pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20230108130457229.png\" alt=\"\" /></p>\n<p>æ­¤æ—¶ï¼Œå³ä½¿ä¸åšä»»ä½•å±è”½æ“ä½œï¼Œå¯ä»¥æ­£å¸¸æ£€æµ‹è½¯ä»¶æ›´æ–°ï¼Œä½†ä¸ä¼šå‡ºç°æ›´æ–°æ ‡è®°ï¼ˆçº¢ç‚¹æ•°å­— 1ï¼‰</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20230108130641625.png\" alt=\"\" /></p>\n</li>\n</ol>\n</li>\n</ol>\n",
            "tags": [
                "æŠ˜è…¾",
                "Mac",
                "å±è”½æ›´æ–°"
            ]
        },
        {
            "id": "https://log992.cn/android/APK%E6%89%8B%E5%8A%A8%E7%AD%BE%E5%90%8D/",
            "url": "https://log992.cn/android/APK%E6%89%8B%E5%8A%A8%E7%AD%BE%E5%90%8D/",
            "title": "APKæ‰‹åŠ¨ç­¾å",
            "date_published": "2022-11-21T05:14:55.000Z",
            "content_html": "<blockquote>\n<p>æœ€è¿‘å‘ç°æ–°ç‰ˆæœ¬çš„ Android studio æ‰“åŒ… apk æ—¶æ²¡æœ‰ V1 è¯ä¹¦å’Œ V2 è¯ä¹¦é€‰é¡¹äº†</p>\n</blockquote>\n<h3 id=\"ç¯å¢ƒ\"><a class=\"anchor\" href=\"#ç¯å¢ƒ\">#</a> ç¯å¢ƒ</h3>\n<p>éœ€è¦ Android SDK</p>\n<p>Mac ç³»ç»Ÿåœ¨ <code>/Users/logan/Library/Android/sdk</code>  ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çš„å·¥å…·åœ¨ <code>build-tools</code>  ç›®å½•ä¸­ï¼Œ</p>\n<p>éœ€è¦ V3 ç‰ˆæœ¬ç­¾åçš„è¯éœ€è¦ 30.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221109%E4%B8%8B%E5%8D%8850112680.png\" alt=\"\" /></p>\n<p>æˆ‘ä»¬ä¸»è¦ç”¨å¾—åˆ°çš„æ˜¯ <code>zipalign</code>  å’Œ <code>aplsigner</code></p>\n<p>ç­¾åä¹‹å‰æˆ‘ä»¬å¯ä»¥å¯¹ apk è¿›è¡Œæ ¡éªŒï¼Œçœ‹æ˜¯å¦å­˜åœ¨ç­¾åï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./apksigner verify <span class=\"token parameter variable\">-v</span> srcApk</pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20221109%E4%B8%8B%E5%8D%8850851503.png\" alt=\"\" /></p>\n<p>å¯ä»¥çœ‹åˆ°è¿”å›äº† <code>DOES NOT VERIFY</code> , è¯´æ˜æ­¤æ—¶æ˜¯æ²¡æœ‰ç­¾åçš„</p>\n<h3 id=\"ç­¾å\"><a class=\"anchor\" href=\"#ç­¾å\">#</a> ç­¾å</h3>\n<ol>\n<li>å‹ç¼©å¯¹é½ - å¯¹é½æœªç­¾åçš„ APK</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>zipalign <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">4</span> srcApk desApk</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>zipalign <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">4</span> æºapk è¾“å‡ºapk</pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20221109%E4%B8%8B%E5%8D%8851446884.png\" alt=\"\" /></p>\n<p>è¾“å‡º successful å³è¯´æ˜å¯¹é½å®Œæˆ</p>\n<ol start=\"2\">\n<li>\n<p>ç­¾å</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>apksigner sign <span class=\"token parameter variable\">--ks</span> xxx.jks --ks-key-alias release <span class=\"token parameter variable\">--out</span> out.apk in.apk</pre></td></tr></table></figure><p><code>xxx.jks</code>  ä¸ºç­¾åæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>xxx.keystore</code> , <code>--ks-key-alias</code>  åé¢è·Ÿä¸Šå½“å‰æ¸ é“ï¼Œç­¾åæ–‡ä»¶å­˜åœ¨å¤šä¸ªæ¸ é“æ—¶ï¼Œéœ€è¦æŒ‡å®šï¼Œå•ä¸ªæ¸ é“æ—¶ä¸éœ€è¦æŒ‡å®šã€‚</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221109%E4%B8%8B%E5%8D%8851413976.png\" alt=\"\" /></p>\n<p>é€šè¿‡ <code>--out</code>  æŒ‡å®šè¾“å‡º apk æœ€åè·Ÿä¸Šéœ€è¦ç­¾åçš„ apk å³å¯</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221109%E4%B8%8B%E5%8D%8851658367.png\" alt=\"\" /></p>\n<p>å›è½¦åè¾“å…¥å¯†ç å³å¯</p>\n<p>æœ€åæˆ‘ä»¬å†æ ¡éªŒä¸‹ç­¾å</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221109%E4%B8%8B%E5%8D%8851746584.png\" alt=\"\" /></p>\n<p>å¯ä»¥çœ‹åˆ° V1,V2,V3 éƒ½æœ‰äº†</p>\n</li>\n</ol>\n",
            "tags": [
                "Android",
                "ç­¾å"
            ]
        },
        {
            "id": "https://log992.cn/android/Android%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E8%BD%AC%E6%8D%A2/",
            "url": "https://log992.cn/android/Android%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E8%BD%AC%E6%8D%A2/",
            "title": "Androidç­¾åè¯ä¹¦è½¬æ¢",
            "date_published": "2022-11-11T04:01:55.000Z",
            "content_html": "<blockquote>\n<p>Android ç­¾åè¯ä¹¦ä¸€èˆ¬ä¸º jks å’Œ keystore æ ¼å¼ï¼Œ <code>jks</code>  æ˜¯åœ¨ <code>android studio</code>  é‡Œé¢ç”Ÿæˆçš„ç­¾åè¯ä¹¦</p>\n<p><code>keystore</code>  æ˜¯ <code>eclipse,Creator</code>  é‡Œé¢ç”Ÿæˆçš„ã€‚ ä¸¤è€…åœ¨ä½¿ç”¨æ–¹å¼ä¸Šæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯åœ¨ç®—æ³•ä¸Šæœ‰ä¸€ç‚¹ç‚¹åŒºåˆ«ã€‚</p>\n</blockquote>\n<h3 id=\"ç¯å¢ƒ\"><a class=\"anchor\" href=\"#ç¯å¢ƒ\">#</a> ç¯å¢ƒ</h3>\n<p>éœ€è¦ JDK ç¯å¢ƒï¼Œé…ç½®å¥½ç¯å¢ƒå˜é‡åï¼Œè¾“å…¥ <code>keytool</code></p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88113018178.png\" alt=\"\" /></p>\n<h3 id=\"ç­¾åæ–‡ä»¶-keystoreè½¬æ¢-jks\"><a class=\"anchor\" href=\"#ç­¾åæ–‡ä»¶-keystoreè½¬æ¢-jks\">#</a> ç­¾åæ–‡ä»¶ .keystore è½¬æ¢ .jks</h3>\n<ol>\n<li>é¦–å…ˆè½¬æ¢æˆ pkcs12</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> keystoreæ–‡ä»¶è·¯å¾„ <span class=\"token parameter variable\">-destkeystore</span> è¾“å‡ºæ–‡ä»¶è·¯å¾„ <span class=\"token parameter variable\">-deststoretype</span> pkcs12</pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> /Users/logan/Downloads/keyDir/wuhanins.keystore <span class=\"token parameter variable\">-destkeystore</span> /Users/logan/Downloads/keyDir/wuhanins.p12 <span class=\"token parameter variable\">-deststoretype</span> pkcs12</pre></td></tr></table></figure><p>å›è½¦åè¾“å…¥ p12 è¯ä¹¦å¯†ç ï¼Œç¡®è®¤ p12 è¯ä¹¦å¯†ç ï¼Œkeystore è¯ä¹¦å¯†ç åå³å¯ç”Ÿæˆ p12 è¯ä¹¦</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88113750313.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>å°† pkcs12 è½¬æ¢ä¸º jks æ–‡ä»¶</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> P12è¯ä¹¦è·¯å¾„ <span class=\"token parameter variable\">-srcstoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> è¾“å‡ºjksè¯ä¹¦è·¯å¾„ <span class=\"token parameter variable\">-deststoretype</span> JKS</pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> /Users/logan/Downloads/keyDir/wuhanins.p12 <span class=\"token parameter variable\">-srcstoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> /Users/logan/Downloads/keyDir/wuhanins.jks <span class=\"token parameter variable\">-deststoretype</span> JKS</pre></td></tr></table></figure><p>å›è½¦åä¾æ¬¡è¾“å…¥æ–°çš„ jks è¯ä¹¦å¯†ç ï¼Œç¡®è®¤ jks è¯ä¹¦å¯†ç ï¼Œp12 è¯ä¹¦å¯†ç å³å¯</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88114324184.png\" alt=\"\" /></p>\n<p>è‡³æ­¤ï¼Œkeystore è¯ä¹¦å·²ç»è½¬æ¢ä¸º jks è¯ä¹¦</p>\n<h3 id=\"ç­¾åæ–‡ä»¶-jks-è½¬æ¢-keystore\"><a class=\"anchor\" href=\"#ç­¾åæ–‡ä»¶-jks-è½¬æ¢-keystore\">#</a> ç­¾åæ–‡ä»¶ .jks è½¬æ¢ .keystore</h3>\n<ol>\n<li>ç›´æ¥è½¬æ¢</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> jksæ–‡ä»¶è·¯å¾„ <span class=\"token parameter variable\">-srcstoretype</span> JKS <span class=\"token parameter variable\">-deststoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> è¾“å‡ºkeystoreæ–‡ä»¶è·¯å¾„</pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> /Users/logan/Downloads/keyDir/pyh.jks <span class=\"token parameter variable\">-srcstoretype</span> JKS <span class=\"token parameter variable\">-deststoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> /Users/logan/Downloads/keyDir/pyh.keystore</pre></td></tr></table></figure><p>å›è½¦åä¾æ¬¡è¾“å…¥æ–° keystore è¯ä¹¦å¯†ç ï¼Œç¡®è®¤ keystore è¯ä¹¦å¯†ç ï¼ŒåŸå§‹ jks è¯ä¹¦å¯†ç å³å¯</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88114857586.png\" alt=\"\" /></p>\n<p>è‡³æ­¤ç›´æ¥ä» jks è½¬æ¢ä¸º keysotre å®Œæˆ</p>\n<ol start=\"2\">\n<li>jks è½¬æ¢ä¸º p12, å†ä» p12 è½¬æ¢ä¸º keysotre</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> jksæ–‡ä»¶è·¯å¾„ <span class=\"token parameter variable\">-srcstoretype</span> JKS <span class=\"token parameter variable\">-deststoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> p12æ–‡ä»¶è·¯å¾„</pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> /Users/logan/Downloads/keyDir/pyh.jks <span class=\"token parameter variable\">-srcstoretype</span> JKS <span class=\"token parameter variable\">-deststoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> /Users/logan/Downloads/keyDir/pyh.p12</pre></td></tr></table></figure><p>å›è½¦åä¾æ¬¡è¾“å…¥ p12 è¯ä¹¦å¯†ç ï¼Œç¡®è®¤ p12 è¯ä¹¦å¯†ç ï¼Œjks è¯ä¹¦å¯†ç å³å¯</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88115431868.png\" alt=\"\" /></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> p12æ–‡ä»¶è·¯å¾„ <span class=\"token parameter variable\">-srcstoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> .keystoreæ–‡ä»¶è·¯å¾„ <span class=\"token parameter variable\">-deststoretype</span> JKS</pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool <span class=\"token parameter variable\">-v</span> <span class=\"token parameter variable\">-importkeystore</span> <span class=\"token parameter variable\">-srckeystore</span> /Users/logan/Downloads/keyDir/pyh.p12  <span class=\"token parameter variable\">-srcstoretype</span> PKCS12 <span class=\"token parameter variable\">-destkeystore</span> /Users/logan/Downloads/keyDir/pyh.keystore <span class=\"token parameter variable\">-deststoretype</span> JKS</pre></td></tr></table></figure><p>å›è½¦åä¾æ¬¡è¾“å…¥æ–°çš„ keystore è¯ä¹¦å¯†ç ï¼Œç¡®è®¤ keystore è¯ä¹¦å¯†ç ï¼Œp12 è¯ä¹¦å¯†ç å³å¯</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88115925832.png\" alt=\"\" /></p>\n<p>è‡³æ­¤ï¼Œkeystore è¯ä¹¦è½¬æ¢å®Œæ¯•</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20221111%E4%B8%8A%E5%8D%88115957594.png\" alt=\"\" /></p>\n",
            "tags": [
                "Android",
                "Android studio",
                "è¯ä¹¦"
            ]
        },
        {
            "id": "https://log992.cn/android/%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8FIleProvider/",
            "url": "https://log992.cn/android/%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8FIleProvider/",
            "title": "æ­£ç¡®ä½¿ç”¨FIleProvider",
            "date_published": "2022-09-10T11:14:55.000Z",
            "content_html": "<h2 id=\"èµ·å› \"><a class=\"anchor\" href=\"#èµ·å› \">#</a> èµ·å› </h2>\n<blockquote>\n<p>è‡ªåŠ¨æ›´æ–°æ—¶ï¼ŒAPP è¦†ç›–å®‰è£…å¤±æ•ˆäº†ï¼Œç”±äºå…ˆå‰æµ‹è¯•è°ƒè¯•éƒ½æ˜¯æ‰‹åŠ¨è¦†ç›–å®‰è£…ï¼Œå› æ­¤æœªå‘ç°é—®é¢˜</p>\n</blockquote>\n<p>## é”™è¯¯å®šä½<br />\né€šè¿‡è°ƒè¯•å‘ç°</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span>ActivityNotFoundException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">No</span> <span class=\"token class-name\">Activity</span> found <span class=\"token keyword\">to</span> <span class=\"token namespace\">handle</span> <span class=\"token class-name\">Intent</span> <span class=\"token punctuation\">&#123;</span> act<span class=\"token operator\">=</span><span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>intent<span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">.</span></span>VIEW</span> dat<span class=\"token operator\">=</span>file<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token comment\">//storage/emulated/0/CESPIB/ces_pib.apk typ=application/vnd.android.package-archive flg=0x10000000 &#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>Instrumentation</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkStartActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Instrumentation</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">2113</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>Instrumentation</span><span class=\"token punctuation\">.</span><span class=\"token function\">execStartActivity</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Instrumentation</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">1739</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>Activity</span><span class=\"token punctuation\">.</span><span class=\"token function\">startActivityForResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Activity</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">5343</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tat android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>k<span class=\"token punctuation\">.</span><span class=\"token function\">startActivityForResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BaseFragmentActivityJB</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tat android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">startActivityForResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FragmentActivity</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">79</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>Activity</span><span class=\"token punctuation\">.</span><span class=\"token function\">startActivityForResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Activity</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">5284</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tat android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">startActivityForResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FragmentActivity</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">859</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>Activity</span><span class=\"token punctuation\">.</span><span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Activity</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">5714</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>Activity</span><span class=\"token punctuation\">.</span><span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Activity</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">5682</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>wuhanins<span class=\"token punctuation\">.</span>ces_pib<span class=\"token punctuation\">.</span>extra<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span>DownloadApkDialogFragment</span><span class=\"token punctuation\">.</span><span class=\"token function\">installApk</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DownloadApkDialogFragment</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">166</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>wuhanins<span class=\"token punctuation\">.</span>ces_pib<span class=\"token punctuation\">.</span>extra<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span>DownloadApkDialogFragment</span><span class=\"token punctuation\">.</span>access$<span class=\"token function\">300</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DownloadApkDialogFragment</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">33</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>wuhanins<span class=\"token punctuation\">.</span>ces_pib<span class=\"token punctuation\">.</span>extra<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span>DownloadApkDialogFragment</span>$<span class=\"token number\">2.</span><span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DownloadApkDialogFragment</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">150</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Handler</span><span class=\"token punctuation\">.</span><span class=\"token function\">dispatchMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Handler</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">107</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">213</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">8147</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span>Method</span><span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Native</span> <span class=\"token class-name\">Method</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>RuntimeInit</span>$<span class=\"token class-name\">MethodAndArgsCaller</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeInit</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">513</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\tat <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ZygoteInit</span><span class=\"token punctuation\">.</span><span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZygoteInit</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">1100</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å…·ä½“é”™è¯¯å‡ºç°åœ¨å°†æ–‡ä»¶è½¬æ¢ä¸º Uri è·³è½¬åˆ°å®‰è£… apk çš„ intent æ—¶å‡ºé”™ï¼Œæƒ³äº†æƒ³ï¼Œåº”è¯¥æ˜¯ 7.0 ä»¥åé™åˆ¶äº† APP å¯¹äºæ–‡ä»¶ uri çš„ä½¿ç”¨æƒé™ã€‚æœç„¶ï¼ŒæŸ¥çœ‹<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5nb29nbGUuY24vYWJvdXQvdmVyc2lvbnMvbm91Z2F0L2FuZHJvaWQtNy4wLWNoYW5nZXM=\">å®˜ç½‘</span>åå‘ç°äº†ç«¯å€ª:</p>\n<blockquote>\n<h3 id=\"åœ¨åº”ç”¨é—´å…±äº«æ–‡ä»¶\"><a class=\"anchor\" href=\"#åœ¨åº”ç”¨é—´å…±äº«æ–‡ä»¶\">#</a> åœ¨åº”ç”¨é—´å…±äº«æ–‡ä»¶</h3>\n<p>å¯¹äºé¢å‘ Android 7.0 çš„åº”ç”¨ï¼ŒAndroid æ¡†æ¶æ‰§è¡Œçš„ StrictMode API æ”¿ç­–ç¦æ­¢åœ¨æ‚¨çš„åº”ç”¨å¤–éƒ¨å…¬å¼€ file:// URIã€‚å¦‚æœä¸€é¡¹åŒ…å«æ–‡ä»¶ URI çš„ intent ç¦»å¼€æ‚¨çš„åº”ç”¨ï¼Œåˆ™åº”ç”¨å‡ºç°æ•…éšœï¼Œå¹¶å‡ºç° FileUriExposedException å¼‚å¸¸ã€‚è¦åœ¨åº”ç”¨é—´å…±äº«æ–‡ä»¶ï¼Œæ‚¨åº”å‘é€ä¸€é¡¹ content:// URIï¼Œå¹¶æˆäºˆ URI ä¸´æ—¶è®¿é—®æƒé™ã€‚è¿›è¡Œæ­¤æˆæƒçš„æœ€ç®€å•æ–¹å¼æ˜¯ä½¿ç”¨ FileProvider ç±»ã€‚å¦‚éœ€äº†è§£æœ‰å…³æƒé™å’Œå…±äº«æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å…±äº«æ–‡ä»¶ã€‚</p>\n</blockquote>\n<p>å¤§æ„å°±æ˜¯è¯´æ–‡ä»¶çš„è®¿é—®æƒé™æé«˜äº†ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ &quot;file://&quot; çš„æ–¹å¼æ¥å…±äº«æ–‡ä»¶äº†ï¼Œåº”è¯¥ä½¿ç”¨ &quot;content://&quot; URI çš„æ–¹å¼æ¥å…±äº«æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ FileProvider ç±»æ¥æˆæƒã€‚</p>\n<h2 id=\"å¤„ç†æ–¹æ¡ˆ\"><a class=\"anchor\" href=\"#å¤„ç†æ–¹æ¡ˆ\">#</a> å¤„ç†æ–¹æ¡ˆ</h2>\n<p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å®‰è£… apk ä¼šè¿™æ ·æ“ä½œ</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">installApk</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> filePath<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ACTION_VIEW</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setDataAndType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Uri</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromFile</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"application/vnd.android.package-archive\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        intent<span class=\"token punctuation\">.</span><span class=\"token function\">setFlags</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_ACTIVITY_NEW_TASK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        mContext<span class=\"token punctuation\">.</span><span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä½† 7.0 ä»¥ä¸Šè¦æ±‚ä½¿ç”¨ FileProvider æ¥æˆæƒè®¿é—®æ–‡ä»¶<br />\næ ¹æ®å®˜æ–¹çš„æŒ‡å¼•ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5nb29nbGUuY24vcmVmZXJlbmNlL2FuZHJvaWQvc3VwcG9ydC92NC9jb250ZW50L0ZpbGVQcm92aWRlcg==\">https://developer.android.google.cn/reference/android/support/v4/content/FileProvider</span> ï¼Œå¤§æ¦‚éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>\n<ul>\n<li>å®šä¹‰ FileProvider</li>\n<li>æŒ‡å®šå¯ç”¨æ–‡ä»¶</li>\n<li>ç”Ÿæˆæ–‡ä»¶çš„ URI</li>\n<li>æˆäºˆ URI ä¸´æ—¶æƒé™</li>\n<li>å‘å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæä¾›å†…å®¹ URI</li>\n</ul>\n<p>##### ä¸‹é¢æ¥ä¸€ä¸€ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ªæ­¥éª¤ï¼š</p>\n<ol>\n<li>å®šä¹‰ FileProvider<br />\n åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­æ³¨å†Œ provider</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>provider</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.support.v4.content.FileProvider<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>authorities</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.wuhanins.ces_pib.provider<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>exported</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>grantUriPermissions</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token comment\">&lt;!-- å…ƒæ•°æ® --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta-data</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.support.FILE_PROVIDER_PATHS<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@xml/update_apk_paths<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>provider</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>è§£é‡Šä¸€ä¸‹å‡ ä¸ªå‚æ•°çš„å«ä¹‰ï¼š<br />\n<strong>android:name</strong><br />\n æ–‡ä»¶æä¾›è€…çš„ç±»åï¼Œå›ºå®šä¸º &quot;android.support.v4.content.FileProvider&quot;ï¼Œå¦‚æœä½ å¾ˆç‰›é€¼ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªç±»å¹¶ç»§æ‰¿ &quot;android.support.v4.content.FileProvider&quot;ï¼Œç„¶åå®ç°ä¸€äº›æ‰©å±•çš„åŠŸèƒ½ã€‚<br />\n<strong>android:authorities</strong><br />\n æƒé™çš„åå­—ï¼Œç”¨äºæ ‡è¯† provider æä¾›çš„å†…å®¹ï¼Œå¯ä»¥æœ‰å¤šä¸ªåå­—ï¼Œå„åå­—ä¹‹é—´ç”¨ â€œï¼›â€ éš”å¼€ã€‚ä¸ºäº†ä¸å’Œå…¶å®ƒåå­—å†²çªä¸€èˆ¬ä½¿ç”¨åŸŸåçš„å½¢å¼æ¥æè¿°ã€‚åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç”¨é¡¹ç›®çš„åŒ…åæ›¿æ¢ï¼Œä¾‹å¦‚</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>android:authorities=\"$&#123;applicationId&#125;.provider\"</pre></td></tr></table></figure><p>ç›´æ¥é€šè¿‡å¼•ç”¨çš„æ–¹å¼æ·»åŠ  authorities<br />\n<strong>android:exported</strong><br />\n å†…å®¹æä¾›è€…æ˜¯å¦å¯ä¾›å…¶ä»–åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œåœ¨è¿™é‡Œä¸éœ€è¦ï¼Œæ‰€ä»¥å¡« false<br />\n<strong>android:grantUriPermissions</strong><br />\n æ˜¯å¦æˆæƒç»™é‚£äº›æœ¬æ¥æ— æƒé™è®¿é—®çš„äººä¸´æ—¶è®¿é—®å†…å®¹æä¾›è€…æä¾›çš„å†…å®¹ï¼Œè¿™é‡Œå¡« trueï¼Œä¸ç„¶å°±æ²¡æ³•è®¿é—®åˆ°è¿™ä¸ªæ–‡ä»¶äº†ã€‚</p>\n<ol start=\"2\">\n<li>æŒ‡å®šå¯ç”¨çš„æ–‡ä»¶<br />\nä¸ºäº†æŒ‡å®šéœ€è¦è®¿é—®çš„æ–‡ä»¶ï¼Œéœ€è¦åœ¨ä¸€ä¸ª xml æ–‡ä»¶ä¸­æŒ‡å®šè¢«è®¿é—®æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ã€‚<br />\nåœ¨ res ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª xml æ–‡ä»¶å¤¹ï¼Œç„¶åæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼šupdate_apk_paths.xmlï¼ˆæ–‡ä»¶åè‡ªå·±éšæ„èµ·ï¼‰, å†…å®¹å¦‚ä¸‹ï¼š</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>paths</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">&lt;!--</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        files-pathï¼š          è¯¥æ–¹å¼æä¾›åœ¨åº”ç”¨çš„å†…éƒ¨å­˜å‚¨åŒºçš„æ–‡ä»¶ / å­ç›®å½•çš„æ–‡ä»¶ã€‚</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                              å®ƒå¯¹åº” Context.getFilesDir è¿”å›çš„è·¯å¾„ï¼šeg:â€/data/data/com.jph.simple/filesâ€ã€‚</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        cache-pathï¼š          è¯¥æ–¹å¼æä¾›åœ¨åº”ç”¨çš„å†…éƒ¨å­˜å‚¨åŒºçš„ç¼“å­˜å­ç›®å½•çš„æ–‡ä»¶ã€‚</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                              å®ƒå¯¹åº” getCacheDir è¿”å›çš„è·¯å¾„ï¼šeg:â€œ/data/data/com.jph.simple/cacheâ€ï¼›</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        external-pathï¼š       è¯¥æ–¹å¼æä¾›åœ¨å¤–éƒ¨å­˜å‚¨åŒºåŸŸæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                              å®ƒå¯¹åº” Environment.getExternalStorageDirectory è¿”å›çš„è·¯å¾„ï¼š</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        external-cache-pathï¼š è¯¥æ–¹å¼æä¾›åœ¨åº”ç”¨çš„å¤–éƒ¨å­˜å‚¨åŒºæ ¹ç›®å½•çš„ä¸‹çš„æ–‡ä»¶ã€‚</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                              å®ƒå¯¹åº” Context#getExternalFilesDir (String) Context.getExternalFilesDir (null)</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                              è¿”å›çš„è·¯å¾„ã€‚eg:â€/storage/emulated/0/Android/data/com.jph.simple/filesâ€</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        --></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>       <span class=\"token comment\">&lt;!-- name=â€œupdateâ€</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        ç›¸å½“äºä¸‹é¢çš„ path çš„åˆ«åï¼Œä¸ºäº†æŠŠçœŸå®çš„è·¯å¾„éšè—èµ·æ¥ï¼Œè¿™æ ·å°±åªèƒ½çœ‹åˆ°åˆ«åï¼Œå¦‚æœæŒ‰ç…§è¿™ä¸ªåˆ«åè·¯å¾„å»æ‰¾æ–‡ä»¶çš„è¯è‚¯å®šæ˜¯æ‰¾ä¸åˆ°çš„ã€‚è¿™ä¸ªåˆ«åè‡ªå·±éšä¾¿å–ï¼Œæˆ‘æŠŠå®ƒå«åš â€œupdateâ€</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        path=\"\"</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        ä»£è¡¨ä½ è¦åˆ†äº«çš„çœŸå®çš„å­ç›®å½•åï¼Œç©ºå­—ç¬¦ä¸²ä»£è¡¨æ ¹ç›®å½•ï¼Œæ³¨æ„è¯¥å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå­ç›®å½•ï¼Œä¸èƒ½æ˜¯æ–‡ä»¶å --></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>external-path</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>update<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CESPIB<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>paths</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ç»¼åˆæ¥è®²ï¼Œä»¥ä¸Šé…ç½®è¡¨æ˜ï¼šæˆ‘è¦åˆ†äº«ä¸€ä¸ªç›®å½•ä¾›å…¶å®ƒäººè®¿é—®ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯å†…éƒ¨å­˜å‚¨åŒºçš„ç¼“å­˜ç›®å½•çš„æ ¹ç›®å½•ï¼Œå³ getCacheDir () çš„è¿”å›å€¼ã€‚æ‰€æœ‰æ ¹ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½å¯ä»¥è¢«è®¿é—®ï¼ŒåŒæ—¶æˆ‘ä¸ºè¿™ç¼“å­˜ç›®å½•å–äº†ä¸€ä¸ªåˆ«åå« â€œupdateâ€, ä»¥æ··æ·†è§†å¬ã€‚<br />\nå½“ä½ è¦å°†è‡ªå·±çš„ç›®å½•åˆ†äº«ç»™å…¶ä»–åº”ç”¨ä½¿ç”¨æ—¶å°±éœ€è¦ä¸‹é¢çš„æ“ä½œäº†ï¼Œå°†ä¸Šé¢çš„ update_apk_paths.xml æ–‡ä»¶é“¾æ¥åˆ° AndroidManifest.xml ä¸­å®šä¹‰çš„ provider ä¸­ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰ä¸­çš„ â€œå…ƒæ•°æ®â€ çš„å†…å®¹</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> å…ƒæ•°æ® <span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>meta<span class=\"token operator\">-</span>data</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.support.FILE_PROVIDER_PATHS\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    android<span class=\"token operator\">:</span>resource<span class=\"token operator\">=</span><span class=\"token string\">\"@xml/update_apk_paths\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></pre></td></tr></table></figure><p><strong>android:name</strong><br />\n ä»£è¡¨èµ„æºçš„ç±»å‹ï¼Œæ­¤å¤„ä¸ºå›ºå®šå€¼ &quot;android.support.FILE_PROVIDER_PATHS&quot;<br />\n<strong>android:resource</strong><br />\n ä»£è¡¨èµ„æºæ–‡ä»¶ï¼Œå³ update_apk_paths.xmlï¼Œä½†æ˜¯ä¸è¦åç¼€å</p>\n<ol start=\"3\">\n<li>ç”Ÿæˆæ–‡ä»¶çš„ URI<br />\n ç”¨ä»¥ä¸‹æ–¹å¼ç”Ÿæˆæ–‡ä»¶çš„ Uriï¼š</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Uri</span> apkUri <span class=\"token operator\">=</span> <span class=\"token class-name\">FileProvider</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUriForFile</span><span class=\"token punctuation\">(</span>mContext<span class=\"token punctuation\">,</span> <span class=\"token string\">\"com.wuhanins.ces_pib.provider\"</span><span class=\"token punctuation\">,</span> apkFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•° &quot;com.wuhanins.ces_pib.provider&quot; æ˜¯åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­å£°æ˜çš„ provider ä¸­ <strong>android:authorities</strong> å…ƒç´ çš„å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° apkFile å°±æ˜¯ä¸‹è½½ä¸‹æ¥çš„ä¿å­˜åœ¨ç¼“å­˜ç›®å½•ä¸‹çš„ apk æ–‡ä»¶ï¼Œå‡å¦‚ä½ æ˜¯ç”¨çš„æ˜¯ä¸‹é¢çš„æ–¹å¼å£°æ˜çš„ authorities</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>android:authorities=\"$&#123;applicationId&#125;.provider\"</pre></td></tr></table></figure><p>é‚£ä¹ˆä½ è°ƒç”¨çš„æ—¶å€™æœ€å¥½æ˜¯</p>\n<pre><code class=\"language-Java\">Uri apkUri = FileProvider.getUriForFile(mContext, mContext.getApplicationInfo().packageName+&quot;.apk.provider&quot;, apkFile);\n</code></pre>\n<p>é€šè¿‡ç³»ç»Ÿ API è·å–å½“å‰åŒ…åï¼Œé¿å…æ‹¼å†™å‡ºé”™<br />\n 4. æˆäºˆ URI ä¸´æ—¶æƒé™<br />\næˆæƒæœ‰å¾ˆå¤šç§æ–¹å¼ï¼šè¿™é‡Œåªè¯´ä¸€ç§ï¼Œå°±æ˜¯é€šè¿‡ Intent addFlags () æ–¹æ³•ï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>intent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_GRANT_READ_URI_PERMISSION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol start=\"5\">\n<li>å‘å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæä¾›å†…å®¹ URI<br />\n ç”¨ startActivity (intent) å¯åŠ¨ä¸€ä¸ªåº”ç”¨å°±å¯ä»¥äº†ï¼Œè¢«å¯åŠ¨çš„åº”ç”¨å°±æœ‰æƒé™è®¿é—®ä½ æä¾›çš„æ–‡ä»¶äº†ï¼Œä½†è¦æ³¨æ„å¿…é¡»æ·»åŠ è¿™å¥ï¼š</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>intent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_GRANT_READ_URI_PERMISSION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"æœ€å\"><a class=\"anchor\" href=\"#æœ€å\">#</a> æœ€å</h2>\n<p>å®‰è£… apk çš„æ–¹æ³•å°±æ”¹é€ æˆäº†ä¸‹é¢è¿™æ ·äº†</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">installApk</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> filePath<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token class-name\">File</span> apkFile <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ACTION_VIEW</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        intent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_ACTIVITY_NEW_TASK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Build</span><span class=\"token punctuation\">.</span><span class=\"token constant\">VERSION</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SDK_INT</span> <span class=\"token operator\">>=</span> <span class=\"token class-name\">Build<span class=\"token punctuation\">.</span>VERSION_CODES<span class=\"token punctuation\">.</span>N</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token comment\">// 7.0 ä»¥ä¸Š</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">Uri</span> apkUri <span class=\"token operator\">=</span> <span class=\"token class-name\">FileProvider</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUriForFile</span><span class=\"token punctuation\">(</span>mContext<span class=\"token punctuation\">,</span> <span class=\"token string\">\"com.wuhanins.ces_pib.provider\"</span><span class=\"token punctuation\">,</span> apkFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            intent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FLAG_GRANT_READ_URI_PERMISSION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            intent<span class=\"token punctuation\">.</span><span class=\"token function\">setDataAndType</span><span class=\"token punctuation\">(</span>apkUri<span class=\"token punctuation\">,</span> <span class=\"token string\">\"application/vnd.android.package-archive\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token comment\">// 7.0 ä»¥ä¸‹</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token class-name\">Uri</span> uri <span class=\"token operator\">=</span> <span class=\"token class-name\">Uri</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromFile</span><span class=\"token punctuation\">(</span>apkFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            intent<span class=\"token punctuation\">.</span><span class=\"token function\">setDataAndType</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">,</span> <span class=\"token string\">\"application/vnd.android.package-archive\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        mContext<span class=\"token punctuation\">.</span><span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è‡ªåŠ¨æ›´æ–°å¤±è´¥çš„é—®é¢˜å®Œç¾è§£å†³ï¼Œå…¶ä»–ä¾‹å¦‚è°ƒç”¨ç³»ç»Ÿç›¸æœºï¼Œè°ƒç”¨ç³»ç»Ÿç›¸å†Œç­‰ç­‰éƒ½å¯ä»¥ç±»æ¨äº†ï¼Œä½†æ˜¯åˆ‡è®°ä¸€å®šè¦æ·»åŠ ä¸Š Flag</p>\n<pre><code class=\"language-Java\">intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n</code></pre>\n",
            "tags": [
                "Android",
                "FIleProvider"
            ]
        },
        {
            "id": "https://log992.cn/JAVA111/Date%E6%B8%85%E7%A9%BA%E6%97%B6%E5%88%86%E7%A7%92/",
            "url": "https://log992.cn/JAVA111/Date%E6%B8%85%E7%A9%BA%E6%97%B6%E5%88%86%E7%A7%92/",
            "title": "Dateæ¸…ç©ºæ—¶åˆ†ç§’",
            "date_published": "2022-08-02T08:06:55.000Z",
            "content_html": "<blockquote>\n<p>å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨æ•°æ®åº“å­˜å‚¨è¯¦ç»†çš„æ—¶é—´æ•°æ®ï¼Œä½†æ˜¯åœ¨è·å–æ•°æ®çš„æ—¶å€™åˆéœ€è¦ç²¾ç¡®åˆ°å¤©æ¥å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚</p>\n</blockquote>\n<h3 id=\"å·²åºŸå¼ƒçš„æ–¹æ³•\"><a class=\"anchor\" href=\"#å·²åºŸå¼ƒçš„æ–¹æ³•\">#</a> å·²åºŸå¼ƒçš„æ–¹æ³•</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Date</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>now<span class=\"token punctuation\">.</span><span class=\"token function\">setHours</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>now<span class=\"token punctuation\">.</span><span class=\"token function\">setMinutes</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>now<span class=\"token punctuation\">.</span><span class=\"token function\">setSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>ä¸Šè¿°æ–¹æ³•åœ¨ JDK version 1.1 ä¹‹åå°±åºŸå¼ƒæ‰äº†</p>\n<h3 id=\"é€šç”¨æ–¹æ³•\"><a class=\"anchor\" href=\"#é€šç”¨æ–¹æ³•\">#</a> é€šç”¨æ–¹æ³•</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Date</span> operationTime <span class=\"token operator\">=</span> task<span class=\"token punctuation\">.</span><span class=\"token function\">getOperationTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Calendar</span> calendar <span class=\"token operator\">=</span> <span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>calendar<span class=\"token punctuation\">.</span><span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span>operationTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>calendar<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HOUR_OF_DAY</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>calendar<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MINUTE</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>calendar<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SECOND</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>calendar<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Calendar</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MILLISECOND</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"java8æ–¹æ³•\"><a class=\"anchor\" href=\"#java8æ–¹æ³•\">#</a> Java8 æ–¹æ³•</h3>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Date</span> operationTime <span class=\"token operator\">=</span> task<span class=\"token punctuation\">.</span><span class=\"token function\">getOperationTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">LocalDate</span> localDate <span class=\"token operator\">=</span> operationTime<span class=\"token punctuation\">.</span><span class=\"token function\">toInstant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">atZone</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZoneId</span><span class=\"token punctuation\">.</span><span class=\"token function\">systemDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocalDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Date</span> formatDate <span class=\"token operator\">=</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>localDate<span class=\"token punctuation\">.</span><span class=\"token function\">atStartOfDay</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZoneId</span><span class=\"token punctuation\">.</span><span class=\"token function\">systemDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInstant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure>",
            "tags": [
                "Java",
                "Java",
                "Date"
            ]
        },
        {
            "id": "https://log992.cn/android/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E8%80%97%E6%97%B6%E5%88%86%E6%9E%90/",
            "url": "https://log992.cn/android/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E8%80%97%E6%97%B6%E5%88%86%E6%9E%90/",
            "title": "æ•°æ®åº“å¤§æ‰¹é‡æ“ä½œæ•°æ®è€—æ—¶åˆ†æ",
            "date_published": "2022-04-28T08:55:55.000Z",
            "content_html": "<blockquote>\n<p>æ•°æ®åº“æ“ä½œè¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°éœ€è¦å¤§æ‰¹é‡æ“ä½œæ•°æ®çš„æƒ…å†µï¼Œä½¿ç”¨ä¸åŒçš„æ–¹å¼ä¼šå ç”¨ä¸åŒçš„æ—¶é—´ï¼Œä¸‹é¢æ˜¯æˆ‘åœ¨ OrmLite ä¸­çš„ä¸€äº›è€—æ—¶è®°å½•</p>\n</blockquote>\n<ol>\n<li>ä½¿ç”¨ callBatchTasks åŠ è½½æ•°æ®</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>qfQbsCellDao<span class=\"token punctuation\">.</span><span class=\"token function\">callBatchTasks</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Callable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>            <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DataAdjustmentSyncCellQBSInfos</span> cellItem <span class=\"token operator\">:</span> cellQBSInfos<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                    <span class=\"token class-name\">TblQFQbsCell</span> cellData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TblQFQbsCell</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellCode</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellName</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellTypeId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getCellTypeId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setPartId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getPartQBSId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setContractId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getContractId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setModifyTime</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getLastModTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setJsonData</span><span class=\"token punctuation\">(</span>gson<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    qfQbsCellDao</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                            <span class=\"token punctuation\">.</span><span class=\"token function\">createOrUpdate</span><span class=\"token punctuation\">(</span>cellData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20220428162626384.png\" alt=\"image-20220428162626384\" /></p>\n<p>å…± 7373ms</p>\n<ol start=\"2\">\n<li>ç›´æ¥ createOrUpdate</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DataAdjustmentSyncCellQBSInfos</span> cellItem <span class=\"token operator\">:</span> cellQBSInfos<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token class-name\">TblQFQbsCell</span> cellData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TblQFQbsCell</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellCode</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellName</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellTypeId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getCellTypeId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setPartId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getPartQBSId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setContractId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getContractId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setModifyTime</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getLastModTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setJsonData</span><span class=\"token punctuation\">(</span>gson<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            qfQbsCellDao</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">createOrUpdate</span><span class=\"token punctuation\">(</span>cellData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20220428162925869.png\" alt=\"image-20220428162925869\" /></p>\n<p>å…± 29319ms</p>\n<ol start=\"3\">\n<li>ä½¿ç”¨ AndroidDatabaseConnection ä¸€æ¬¡æäº¤äº‹åŠ¡</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// ORMLite çš„æ•°æ®è¿æ¥å°è£…ç±»</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token class-name\">AndroidDatabaseConnection</span> adc <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AndroidDatabaseConnection</span><span class=\"token punctuation\">(</span>baseDBHelper<span class=\"token punctuation\">.</span><span class=\"token function\">getWritableDatabase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        qfQbsCellDao<span class=\"token punctuation\">.</span><span class=\"token function\">setAutoCommit</span><span class=\"token punctuation\">(</span>adc<span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token comment\">// å­˜å‚¨ç‚¹åç§°ä¸º create_claxx</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Savepoint</span> sp <span class=\"token operator\">=</span> adc<span class=\"token punctuation\">.</span><span class=\"token function\">setSavePoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Create_Update_Cell\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DataAdjustmentSyncCellQBSInfos</span> cellItem <span class=\"token operator\">:</span> cellQBSInfos<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token class-name\">TblQFQbsCell</span> cellData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TblQFQbsCell</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellCode</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellName</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setCellTypeId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getCellTypeId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setPartId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getPartQBSId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setContractId</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getContractId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setModifyTime</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getLastModTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            cellData<span class=\"token punctuation\">.</span><span class=\"token function\">setJsonData</span><span class=\"token punctuation\">(</span>gson<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span>cellItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            qfQbsCellDao</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                    <span class=\"token punctuation\">.</span><span class=\"token function\">createOrUpdate</span><span class=\"token punctuation\">(</span>cellData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        adc<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span>sp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><img data-src=\"https://image.log1992.com/uPic/image-20220428163708217.png\" alt=\"image-20220428163708217\" /></p>\n<p>å…± 7574ms</p>\n",
            "tags": [
                "Android",
                "æ•°æ®åº“"
            ]
        },
        {
            "id": "https://log992.cn/android/%E5%BD%93%E5%89%8DAPP%E8%B7%B3%E8%BD%AC%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8/",
            "url": "https://log992.cn/android/%E5%BD%93%E5%89%8DAPP%E8%B7%B3%E8%BD%AC%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8/",
            "title": "å½“å‰APPè·³è½¬ç¬¬ä¸‰æ–¹åº”ç”¨",
            "date_published": "2022-04-13T02:14:55.000Z",
            "content_html": "<blockquote>\n<p>åœ¨åº”ç”¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä»å½“å‰åº”ç”¨è·³è½¬åˆ°å…¶ä»– APP çš„åœºæ™¯ä¹Ÿæ˜¯å­˜åœ¨çš„ã€‚</p>\n</blockquote>\n<h4 id=\"åˆ¤æ–­appæ˜¯å¦å®‰è£…\"><a class=\"anchor\" href=\"#åˆ¤æ–­appæ˜¯å¦å®‰è£…\">#</a> åˆ¤æ–­ APP æ˜¯å¦å®‰è£…</h4>\n<p>åœ¨è·³è½¬ç¬¬ä¸‰æ–¹ APP ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åˆ¤æ–­ç¬¬ä¸‰æ–¹ APP æ˜¯å¦å®‰è£…ï¼Œä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§æ–¹å¼ã€‚</p>\n<ol>\n<li>å¯ä»¥é€šè¿‡è·å–æŸä¸ªåº”ç”¨ä¿¡æ¯çš„å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦å®‰è£…</li>\n</ol>\n<pre><code class=\"language-Kotlin\">fun isAppInstalled(context: Context, packageName: String): Boolean &#123;\n        val packageManager = context.packageManager\n        var isInstalled = false\n        try &#123;\n            val pInfo = packageManager.getPackageInfo(packageName, PackageManager.GET_GIDS)\n            isInstalled = pInfo != null\n        &#125; catch (e: Exception) &#123;\n        &#125;\n        return isInstalled\n    &#125;\n</code></pre>\n<ol start=\"2\">\n<li>é€šè¿‡è·å–åº”ç”¨åˆ—è¡¨å¯¹æ¯”åˆ¤æ–­</li>\n</ol>\n<pre><code class=\"language-Kotlin\">fun isAppInstalled2(context: Context, packageName: String): Boolean &#123;\n        val packageManager = context.packageManager\n        // è·å–æ‰€æœ‰å·²å®‰è£…ç¨‹åºçš„åŒ…ä¿¡æ¯\n        val pInfo = packageManager.getInstalledPackages(0)\n        for (i in pInfo.indices) &#123;\n            // å¾ªç¯åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŒ‡å®šåŒ…å\n            if (pInfo[i].packageName.equals(packageName, ignoreCase = true)) &#123;\n                return true\n            &#125;\n        &#125;\n        return false\n    &#125;\n</code></pre>\n<h4 id=\"è·³è½¬\"><a class=\"anchor\" href=\"#è·³è½¬\">#</a> è·³è½¬</h4>\n<ol>\n<li>è·³è½¬å¯åŠ¨ APP</li>\n</ol>\n<pre><code class=\"language-Kotlin\">/**\n     * å¯åŠ¨App\n     * @param context\n     */\n    fun launchApp(context: Context, packageName: String) &#123;\n        // åˆ¤æ–­æ˜¯å¦å®‰è£…è¿‡Appï¼Œå¦åˆ™å»å¸‚åœºä¸‹è½½\n        if (isAppInstalled(context, packageName)) &#123;\n            context.startActivity(context.packageManager.getLaunchIntentForPackage(packageName))\n        &#125; else &#123;\n            InsAlertDialog.confirm(context, &quot;æ¶ˆæ¯&quot;, &quot;æ˜¯å¦ä¸‹è½½è¯¥ç»„ä»¶ï¼Ÿä¸‹è½½è¿‡ç¨‹ä¸­ä¼šè¿æ¥ç½‘ç»œï¼Œè¯·ç¡®ä¿åœ¨wifiä¸‹è¿›è¡Œã€‚&quot;, &#123; dialog, which -&gt; goToDownloadApp(context, packageName) &#125;) &#123; dialog, which -&gt; &#125;\n        &#125;\n    &#125;\n</code></pre>\n<p>é€šè¿‡ <code>context.packageManager.getLaunchIntentForPackage(packageName)</code>  æ–¹æ³•è·å–è·³è½¬åº”ç”¨çš„ launcherActivity çš„ intent ä¿¡æ¯ï¼Œä»è€Œå®ç°è·³è½¬ã€‚</p>\n<ol start=\"2\">\n<li>è·³è½¬åº”ç”¨çš„ç‰¹å®šç•Œé¢</li>\n</ol>\n<pre><code class=\"language-Kotlin\">/**\n     * å¯åŠ¨Appç‰¹å®šç•Œé¢\n     * @param context\n     */\n    fun launchApp(context: Context, packageName: String, activityName: String, destAction: String) &#123;\n        // åˆ¤æ–­æ˜¯å¦å®‰è£…è¿‡Appï¼Œå¦åˆ™å»å¸‚åœºä¸‹è½½\n        if (isAppInstalled(context, packageName)) &#123;\n            val intent = Intent()\n            intent.component = ComponentName(packageName, activityName)\n            intent.action = destAction\n            context.startActivity(intent)\n        &#125; else &#123;\n            InsAlertDialog.confirm(context, &quot;æ¶ˆæ¯&quot;, &quot;æ˜¯å¦ä¸‹è½½è¯¥ç»„ä»¶ï¼Ÿä¸‹è½½è¿‡ç¨‹ä¸­ä¼šè¿æ¥ç½‘ç»œï¼Œè¯·ç¡®ä¿åœ¨wifiä¸‹è¿›è¡Œã€‚&quot;, &#123; _, _ -&gt; goToDownloadApp(context, packageName) &#125;) &#123; _, _ -&gt; &#125;\n        &#125;\n    &#125;\n</code></pre>\n<p>é€šè¿‡æŒ‡å®šå¯¹åº” APP ä¸­çš„å…·ä½“ Activity çš„å…¨ç±»åæ˜¾å¼è·³è½¬ï¼Œæˆ–è€…ä½¿ç”¨ action éšå¼è·³è½¬éƒ½å¯ä»¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚</p>\n<h4 id=\"appä¸‹è½½\"><a class=\"anchor\" href=\"#appä¸‹è½½\">#</a> APP ä¸‹è½½</h4>\n<ol>\n<li>ç›´æ¥åº”ç”¨å¸‚åœºä¸‹è½½<br />\né€šè¿‡åº”ç”¨çš„åŒ…ååœ¨åº”ç”¨å¸‚åœºæŸ¥è¯¢</li>\n</ol>\n<pre><code class=\"language-Kotlin\">/**\n     * è¿™é‡Œæ˜¯è¿›å…¥åº”ç”¨å•†åº—ï¼Œä¸‹è½½æŒ‡å®šAPPçš„æ–¹æ³•ã€‚\n     */\n    private fun goToMarket(context: Context, packageName: String) &#123;\n        val uri: Uri = Uri.parse(&quot;market://details?id=$packageName&quot;)\n        val goToMarket = Intent(Intent.ACTION_VIEW, uri)\n        try &#123;\n            context.startActivity(goToMarket)\n        &#125; catch (e: java.lang.Exception) &#123;\n        &#125;\n    &#125;\n</code></pre>\n<ol start=\"2\">\n<li>é€šè¿‡åº”ç”¨æä¾›çš„ç›´é“¾ä¸‹è½½ï¼ˆè¿™é‡Œå°±ä¸å¤šåŠ èµ˜è¿°äº†ï¼‰</li>\n</ol>\n<h4 id=\"ç›®æ ‡åº”ç”¨çš„å¤„ç†\"><a class=\"anchor\" href=\"#ç›®æ ‡åº”ç”¨çš„å¤„ç†\">#</a> ç›®æ ‡åº”ç”¨çš„å¤„ç†</h4>\n<ol>\n<li>éšå¼è·³è½¬éœ€è¦ç»™ activity æ·»åŠ ç‰¹å®šçš„ action</li>\n<li>ä¸ºäº†æ¡Œé¢çš„æ•´æ´ï¼Œæœ‰äº›ç›®æ ‡åº”ç”¨ä¸éœ€è¦æ˜¾ç¤ºæ¡Œé¢å›¾æ ‡ï¼Œå¯ä»¥å¯¹å¯åŠ¨ activity çš„ category è¿›è¡Œå¤„ç†ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é»˜è®¤çš„å¯åŠ¨ activity çš„ category æ˜¯ <code>android.intent.category.LAUNCHER</code> , å…·ä½“å¦‚ä¸‹</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activity</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.app.launcher.LauncherActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>intent-filter</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>action</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.action.MAIN<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>category</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>intent-filter</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activity</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>å»é™¤ <code> &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</code>  è¿™ä¸€è¡Œçš„æ˜¾ç¤ºå°±èƒ½ä½¿æ¡Œé¢å›¾æ ‡ä¸æ˜¾ç¤ºäº†ï¼Œæ³¨æ„ï¼šAndroid Studio ç›´æ¥ Run çš„è¯ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ‰¾ä¸åˆ°å¯åŠ¨çš„ categoryï¼Œä½†æ˜¯ä¸å½±å“æ‰“åŒ…å®‰è£…ã€‚åŒç†ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨é»˜è®¤æ–¹æ³•è·³è½¬çš„æ—¶å€™ï¼Œè¿™ç§æƒ…å†µä¸‹ <code>getLaunchIntentForPackage(packageName)</code>  æ–¹æ³•ä¼šè¿”å› nullï¼Œå› æ­¤åœ¨ä½¿ç”¨å·²éšè—å›¾æ ‡çš„ APP ä½œä¸ºç›®æ ‡åº”ç”¨æ—¶ï¼Œä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•è·å–è·³è½¬çš„ intentã€‚</p>\n",
            "tags": [
                "Android",
                "APP"
            ]
        },
        {
            "id": "https://log992.cn/harmony/Harmony%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/",
            "url": "https://log992.cn/harmony/Harmony%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/",
            "title": "Harmonyé—®é¢˜æ±‡æ€»",
            "date_published": "2022-04-01T05:49:55.000Z",
            "content_html": "<ol>\n<li>\n<p>xml ä¸­éƒ¨åˆ†æ§ä»¶éœ€è¦ä½¿ç”¨å…¨åŒ…åï¼Œå¦åˆ™ <code>findComponentById</code>  ä¼šæŸ¥ä¸åˆ°</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ohos.agp.components.webengine.WebView</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token attr-name\"><span class=\"token namespace\">ohos:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$+id:webView<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token attr-name\"><span class=\"token namespace\">ohos:</span>height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token attr-name\"><span class=\"token namespace\">ohos:</span>width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><p>å¦‚æœç›´æ¥ä½¿ç”¨</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>WebView</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token attr-name\"><span class=\"token namespace\">ohos:</span>id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$+id:webView<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token attr-name\"><span class=\"token namespace\">ohos:</span>height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token attr-name\"><span class=\"token namespace\">ohos:</span>width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>match_parent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure><p>ä¼šæŸ¥è¯¢ä¸åˆ°æ”¹æ§ä»¶ã€‚</p>\n</li>\n</ol>\n<p>æœªå®Œå¾…ç»­...</p>\n",
            "tags": [
                "é¸¿è’™",
                "Harmony"
            ]
        },
        {
            "id": "https://log992.cn/harmony/%E5%88%9D%E5%AD%A6Harmony/",
            "url": "https://log992.cn/harmony/%E5%88%9D%E5%AD%A6Harmony/",
            "title": "åˆå­¦Harmony",
            "date_published": "2022-04-01T05:49:55.000Z",
            "content_html": "<blockquote>\n<p>æœ€è¿‘ç ”ç©¶é¸¿è’™å¼€å‘ï¼Œè®°å½•ä¸‹è‡ªå·±çš„ä¸€äº›å¿ƒå¾—</p>\n</blockquote>\n<h3 id=\"é¡¹ç›®é…ç½®\"><a class=\"anchor\" href=\"#é¡¹ç›®é…ç½®\">#</a> é¡¹ç›®é…ç½®</h3>\n<p>1. å¤§è‡´ç»“æ„ä¸ Android çš„é¡¹ç›®ç»“æ„ç›¸ä¼¼</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20220401114456010.png\" alt=\"image-20220401114456010\" /></p>\n<p>2.Harmony æ²¡æœ‰ <code>Manifeest.xml</code>  æ–‡ä»¶ï¼Œé€šè¿‡ <code>config.json</code>  æ–‡ä»¶è¿›è¡Œé…ç½®</p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20220401114737192.png\" alt=\"image-20220401114737192\" /></p>\n<p><img data-src=\"https://image.log1992.com/uPic/image-20220401114757400.png\" alt=\"image-20220401114757400\" /></p>\n<p>åˆ‡æ¢åˆ° Ohosï¼ˆç±»æ¯” Android è§†å›¾ï¼‰è§†å›¾æ—¶ï¼Œæ‰€æœ‰çš„é…ç½®æ–‡ä»¶ä¼šæ”¾ç½®åœ¨ <code>configuration</code>  ç›®å½•ä¸‹</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"app\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"bundleName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.wuhanins.harmonydemo\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"vendor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wuhanins\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token property\">\"deviceConfig\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token property\">\"default\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token property\">\"network\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token property\">\"cleartextTraffic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token property\">\"package\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.wuhanins.harmonydemo\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".MyApplication\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token property\">\"mainAbility\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.wuhanins.harmonydemo.MainAbility\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token property\">\"deviceType\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token string\">\"phone\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token string\">\"tablet\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token string\">\"tv\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token string\">\"wearable\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token string\">\"car\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token property\">\"distro\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token property\">\"deliveryWithInstall\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token property\">\"moduleName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"entry\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token property\">\"moduleType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"entry\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token property\">\"installationFree\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token property\">\"reqPermissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ohos.permission.INTERNET\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token property\">\"reason\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$string:permreason_internet\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token property\">\"usedScene\"</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>          <span class=\"token property\">\"ability\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"com.wuhanins.harmonydemo.MainAbility\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>          <span class=\"token property\">\"when\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"always\"</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token property\">\"abilities\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token property\">\"skills\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token property\">\"entities\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>              <span class=\"token string\">\"entity.system.home\"</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token property\">\"actions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>              <span class=\"token string\">\"action.system.home\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>              <span class=\"token string\">\"action.web\"</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>            <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        <span class=\"token property\">\"orientation\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"unspecified\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token property\">\"visible\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".MainAbility\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$media:icon\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$string:mainability_description\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token property\">\"label\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$string:entry_MainAbility\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"page\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token property\">\"launchType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"standard\"</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>2.1 é¦–å…ˆæ˜¯ <code>app</code>  èŠ‚ç‚¹ï¼Œ <code>bundleName</code>  ç±»æ¯” <code>applicationId</code>  ä½œä¸ºåŒ…åï¼Œ <code>vendor</code>  ä½œä¸ºä¾›åº”å•†ï¼Œå‰©ä¸‹çš„å°±æ˜¯ç‰ˆæœ¬ä¿¡æ¯äº†ã€‚</p>\n<p>2.2  <code>deviceConfig</code>  å¯ä»¥ä¸ºç©ºï¼Œç›®å‰æˆ‘æ·»åŠ äº†å¯ä»¥ä½¿ç”¨ HTTP åè®®è¯·æ±‚ç½‘ç»œã€‚</p>\n<p>2.3  <code>module</code>  å­˜å‚¨é¡¹ç›®æ¨¡å—ä¿¡æ¯ï¼Œ <code>name</code>  å¯¹åº” <code>application</code>  çš„ <code>name</code> , è¯·æ±‚æƒé™å¯ä»¥æ”¾åœ¨ <code>reqPermissions</code>  èŠ‚ç‚¹ä¸­ï¼Œæ™®é€šæƒé™ç›´æ¥ä½¿ç”¨ <code>name</code>  è·å–å³å¯ï¼Œæ•æ„Ÿæƒé™éœ€è¦é…ç½®è¯·æ±‚çš„åŸå› å’Œä½¿ç”¨åœºæ™¯ã€‚</p>\n<p>2.4  <code>abilities</code>  ç±»ä¼¼äº <code>activity</code>  èŠ‚ç‚¹ï¼Œæ‰€æœ‰çš„é¡µé¢ï¼ŒæœåŠ¡ï¼Œéƒ½å¯ä»¥æ”¾åˆ°è¿™é‡Œï¼Œæ ¹æ®ä¸åŒçš„ <code>type</code>  ç¡®å®šå½“å‰çš„ <code>Ability</code>  æ˜¯ä»€ä¹ˆç±»å‹ï¼Œ <code>page</code> ï¼Œ <code>service</code> , <code>data</code>  åˆ†åˆ«ä»£è¡¨äº†ä¸åŒä½œç”¨çš„ <code>Ability</code></p>\n<p>æœªå®Œå¾…ç»­...</p>\n",
            "tags": [
                "é¸¿è’™",
                "Harmony"
            ]
        },
        {
            "id": "https://log992.cn/develop/%E5%A4%96%E7%BD%91IP%E8%8E%B7%E5%8F%96API/",
            "url": "https://log992.cn/develop/%E5%A4%96%E7%BD%91IP%E8%8E%B7%E5%8F%96API/",
            "title": "å¤–ç½‘IPè·å–API",
            "date_published": "2022-03-24T07:49:55.000Z",
            "content_html": "<blockquote>\n<p>å¼€å‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„ IP è·å–</p>\n</blockquote>\n<ol>\n<li>\n<p>æœç‹ (é»˜è®¤ GBK ç¼–ç )</p>\n<p><code>http://pv.sohu.com/cityjson?ie=utf-8</code></p>\n<p>è¿”å›ç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>var returnCitySN = <span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"cip\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"220.249.113.155\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"cid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"420100\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"cname\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"æ¹–åŒ—çœæ­¦æ±‰å¸‚\"</span><span class=\"token punctuation\">&#125;</span>;</pre></td></tr></table></figure></li>\n<li>\n<p>æ·˜å®</p>\n<p><code>https://www.taobao.com/help/getip.php</code></p>\n<p>è¿”å›ç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ipCallback(<span class=\"token punctuation\">&#123;</span>ip<span class=\"token operator\">:</span><span class=\"token string\">\"220.249.113.155\"</span><span class=\"token punctuation\">&#125;</span>)</pre></td></tr></table></figure></li>\n<li>\n<p>Ip-api</p>\n<p><code>http://ip-api.com/json</code></p>\n<p>è¿”å›ç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>status<span class=\"token operator\">:</span> <span class=\"token string\">\"success\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>country<span class=\"token operator\">:</span> <span class=\"token string\">\"China\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>countryCode<span class=\"token operator\">:</span> <span class=\"token string\">\"CN\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>region<span class=\"token operator\">:</span> <span class=\"token string\">\"HB\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>regionName<span class=\"token operator\">:</span> <span class=\"token string\">\"Hubei\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>city<span class=\"token operator\">:</span> <span class=\"token string\">\"Wuhan\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>zip<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>lat<span class=\"token operator\">:</span> <span class=\"token number\">30.589</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>lon<span class=\"token operator\">:</span> <span class=\"token number\">114.2681</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>timezone<span class=\"token operator\">:</span> <span class=\"token string\">\"Asia/Shanghai\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>isp<span class=\"token operator\">:</span> <span class=\"token string\">\"CNC Group CHINA169 Hubei Province Network\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>org<span class=\"token operator\">:</span> <span class=\"token string\">\"Wuhan University\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>as<span class=\"token operator\">:</span> <span class=\"token string\">\"AS4837 CHINA UNICOM China169 Backbone\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>query<span class=\"token operator\">:</span> <span class=\"token string\">\"220.249.113.155\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ·»åŠ å‚æ•°è¿”å›ä¸ä¸€æ ·çš„å€¼</p>\n<p><code>http://ip-api.com/json/?lang=zh-CN</code></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>status<span class=\"token operator\">:</span> <span class=\"token string\">\"success\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>country<span class=\"token operator\">:</span> <span class=\"token string\">\"ä¸­å›½\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>countryCode<span class=\"token operator\">:</span> <span class=\"token string\">\"CN\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>region<span class=\"token operator\">:</span> <span class=\"token string\">\"HB\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>regionName<span class=\"token operator\">:</span> <span class=\"token string\">\"æ¹–åŒ—çœ\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>city<span class=\"token operator\">:</span> <span class=\"token string\">\"æ­¦æ±‰\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>zip<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>lat<span class=\"token operator\">:</span> <span class=\"token number\">30.589</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>lon<span class=\"token operator\">:</span> <span class=\"token number\">114.2681</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>timezone<span class=\"token operator\">:</span> <span class=\"token string\">\"Asia/Shanghai\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>isp<span class=\"token operator\">:</span> <span class=\"token string\">\"CNC Group CHINA169 Hubei Province Network\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>org<span class=\"token operator\">:</span> <span class=\"token string\">\"Wuhan University\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>as<span class=\"token operator\">:</span> <span class=\"token string\">\"AS4837 CHINA UNICOM China169 Backbone\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>query<span class=\"token operator\">:</span> <span class=\"token string\">\"220.249.113.155\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æˆ–è€…æŸ¥è¯¢æŸä¸ª IP çš„ä¿¡æ¯</p>\n<p><code>http://ip-api.com/json/81.69.6.231?lang=zh-CN</code></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>status<span class=\"token operator\">:</span> <span class=\"token string\">\"success\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>country<span class=\"token operator\">:</span> <span class=\"token string\">\"è·å…°\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>countryCode<span class=\"token operator\">:</span> <span class=\"token string\">\"NL\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>region<span class=\"token operator\">:</span> <span class=\"token string\">\"NH\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>regionName<span class=\"token operator\">:</span> <span class=\"token string\">\"North Holland\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>city<span class=\"token operator\">:</span> <span class=\"token string\">\"Amsterdam\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>zip<span class=\"token operator\">:</span> <span class=\"token string\">\"1015\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>lat<span class=\"token operator\">:</span> <span class=\"token number\">52.3798</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>lon<span class=\"token operator\">:</span> <span class=\"token number\">4.88814</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>timezone<span class=\"token operator\">:</span> <span class=\"token string\">\"Europe/Amsterdam\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>isp<span class=\"token operator\">:</span> <span class=\"token string\">\"EuroNet Internet\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>org<span class=\"token operator\">:</span> <span class=\"token string\">\"Wanadoo Nederland BV\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>as<span class=\"token operator\">:</span> <span class=\"token string\">\"AS45090 Shenzhen Tencent Computer Systems Company Limited\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>query<span class=\"token operator\">:</span> <span class=\"token string\">\"81.69.6.231\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "å¼€å‘",
                "IP"
            ]
        },
        {
            "id": "https://log992.cn/android/ContextCompat%E5%92%8CResourcesCompat%E7%9A%84%E5%8C%BA%E5%88%AB/",
            "url": "https://log992.cn/android/ContextCompat%E5%92%8CResourcesCompat%E7%9A%84%E5%8C%BA%E5%88%AB/",
            "title": "ContextCompatå’ŒResourcesCompatçš„åŒºåˆ«",
            "date_published": "2022-03-17T11:14:55.000Z",
            "content_html": "<blockquote>\n<p><code>getResource.getDrawable()</code>  ä»¥åŠ <code>getResource.getColos()</code>  è¿™ä¸€ç±»æ–¹æ³•å·²ç„¶å‘— Google åºŸå¼ƒï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦ä½¿ç”¨æ–°çš„æ–¹æ³•å»å®ç°</p>\n</blockquote>\n<h4 id=\"contextcompat\"><a class=\"anchor\" href=\"#contextcompat\">#</a> ContextCompat</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">ContextCompat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">ContextCompat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDrawable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>ContextCompat.getDrawable();</code>  æ—¶ç›¸å½“äº</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Build</span><span class=\"token punctuation\">.</span><span class=\"token constant\">VERSION</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SDK_INT</span> <span class=\"token operator\">>=</span> <span class=\"token class-name\">Build</span><span class=\"token punctuation\">.</span><span class=\"token constant\">VERSION_CODES</span><span class=\"token punctuation\">.</span><span class=\"token constant\">LOLLIPOP</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> resources<span class=\"token punctuation\">.</span><span class=\"token function\">getDrawable</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">getTheme</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> resources<span class=\"token punctuation\">.</span><span class=\"token function\">getDrawable</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å‚æ•°ä¸º <code>context</code>  å’Œ <code>resId</code>  è¿™ä¸ªæ–¹æ³•è·å–åˆ°çš„èµ„æºä¼šå—åˆ°ä¸»é¢˜å±æ€§çš„æ§åˆ¶</p>\n<h4 id=\"resourcescompat\"><a class=\"anchor\" href=\"#resourcescompat\">#</a> ResourcesCompat</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">ResourcesCompat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDrawable</span><span class=\"token punctuation\">(</span><span class=\"token function\">getResources</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">ResourcesCompat</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDrawable</span><span class=\"token punctuation\">(</span><span class=\"token function\">getResources</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">R</span><span class=\"token punctuation\">.</span>drawable<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> anotherTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>å‚æ•°çš„æœ€åä¸€ä¸ªå¯ä»¥äººä¸ºæ§åˆ¶å½“å‰çš„èµ„æºæ˜¯å¦æ‹¥æœ‰ä¸»é¢˜å±æ€§</p>\n",
            "tags": [
                "Android",
                "èµ„æºè·å–"
            ]
        },
        {
            "id": "https://log992.cn/android/SDK%E5%8D%87%E7%BA%A728%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/",
            "url": "https://log992.cn/android/SDK%E5%8D%87%E7%BA%A728%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/",
            "title": "SDKå‡çº§28çš„é‚£äº›äº‹å„¿",
            "date_published": "2022-03-17T05:14:55.000Z",
            "content_html": "<h3 id=\"ä¸ºä»€ä¹ˆè¦å‡çº§\"><a class=\"anchor\" href=\"#ä¸ºä»€ä¹ˆè¦å‡çº§\">#</a> ä¸ºä»€ä¹ˆè¦å‡çº§ï¼Ÿ</h3>\n<blockquote>\n<p>Android æ‰‹æœºç³»ç»Ÿè¿‘ä¸¤å¹´æ›´æ–°å¾ˆå¿«ï¼Œç‰¹åˆ«æ˜¯ç°åœ¨å¤§å¤šæ•°çš„è®¾å¤‡å·²ç»å‡çº§åˆ°äº† 9.0 ç”šè‡³æ˜¯ 10.0</p>\n</blockquote>\n<p><img data-src=\"https://image.log1992.com/2020/05/3381091807.png\" alt=\"\" /></p>\n<h3 id=\"å‡çº§\"><a class=\"anchor\" href=\"#å‡çº§\">#</a> å‡çº§</h3>\n<ul>\n<li>project çš„ build æ–‡ä»¶ä¿®æ”¹</li>\n</ul>\n<p>åªå°† classpath ä¿®æ”¹ä¸ºäº† 3.1.4, æœ‰éœ€è¦çš„è¯å¯ä»¥æ ¹æ®éœ€æ±‚å¾€ä¸Šå‡çº§</p>\n<pre><code class=\"language-Java\">classpath 'com.android.tools.build:gradle:3.1.4'\n</code></pre>\n<ul>\n<li>ä¿®æ”¹ gradle-wrapper.properties æ–‡ä»¶</li>\n</ul>\n<p>ä¿®æ”¹äº† classpath éœ€è¦åŒæ­¥ä¿®æ”¹è¿™ä¸ªï¼Œç›®å‰æˆ‘åªæ”¹åˆ°äº† 4.4</p>\n<pre><code class=\"language-Java\">distributionUrl=https\\://services.gradle.org/distributions/gradle-4.4-all.zip\n</code></pre>\n<ul>\n<li>module çš„ build æ–‡ä»¶ä¿®æ”¹</li>\n</ul>\n<p>android èŠ‚ç‚¹ä¸‹ä¿®æ”¹</p>\n<pre><code class=\"language-Java\">compileSdkVersion 28\nbuildToolsVersion &quot;28.0.3&quot;\n</code></pre>\n<p>defaultConfig èŠ‚ç‚¹ä¸‹ä¿®æ”¹</p>\n<pre><code class=\"language-Java\">minSdkVersion 21\ntargetSdkVersion 28\n</code></pre>\n<p>ä¿®æ”¹ apk çš„è¾“å‡ºåç§°ï¼Œå…ˆå‰æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œä½†æ˜¯åœ¨å‡çº§åä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯</p>\n<pre><code class=\"language-Java\">Cannot set the value of read-only property 'outputFile' for XXX\n</code></pre>\n<pre><code class=\"language-Java\">applicationVariants.all &#123; variant -&gt;\n\n        if (variant.buildType.name.equals('release')) &#123;\n            variant.outputs.each &#123; output -&gt;\n                def oldFile = output.outputFile\n                def buildName\n                def releaseApkName\n\n                variant.productFlavors.each &#123; product -&gt;\n                    buildName = product.name\n                &#125;\n\n                releaseApkName = 'cjprotect_' + defaultConfig.versionName + '.apk'\n                output.outputFile = new File(oldFile.parent, releaseApkName)\n            &#125;\n        &#125;else&#123;\n            variant.outputs.each &#123; output -&gt;\n                def oldFile = output.outputFile\n                def buildName\n                def releaseApkName\n\n                variant.productFlavors.each &#123; product -&gt;\n                    buildName = product.name\n                &#125;\n\n                releaseApkName = 'cjprotect_debug_' + defaultConfig.versionName + '.apk'\n                output.outputFile = new File(oldFile.parent, releaseApkName)\n            &#125;\n        &#125;\n    &#125;\n</code></pre>\n<p>ç°åœ¨éœ€è¦æ”¹æˆè¿™æ ·</p>\n<pre><code class=\"language-Java\">applicationVariants.all &#123; variant -&gt;\n\n        if (variant.buildType.name == 'release') &#123;\n            variant.outputs.all &#123;\n                outputFileName = &quot;cjprotect_$&#123;defaultConfig.versionName&#125;.apk&quot;\n            &#125;\n        &#125;else&#123;\n            variant.outputs.all &#123;\n                outputFileName = &quot;cjprotect_debug_$&#123;defaultConfig.versionName&#125;.apk&quot;\n            &#125;\n         &#125;\n    &#125;\n</code></pre>\n<p>å¦‚æœä½ é…ç½®äº†æ¸ é“åˆ†åŒ…<br />\nä¼šå‡ºç°è¿™æ ·çš„é”™è¯¯</p>\n<pre><code class=\"language-Java\">Error:All flavors must now belong to a named flavor dimension.\n      The flavor 'flavor_name' is not assigned to a flavor dimension.\n</code></pre>\n<p>å®˜æ–¹ç»™å‡ºçš„<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vc3R1ZGlvL2J1aWxkL2J1aWxkLXZhcmlhbnRzP3V0bV9zb3VyY2U9YW5kcm9pZC1zdHVkaW8jcHJvZHVjdC1mbGF2b3Jz\">è§£é‡Š</span>æ˜¯éœ€è¦é…ç½® flavorDimensions</p>\n<pre><code class=\"language-Java\">flavorDimensions &quot;version&quot;\n    productFlavors &#123;\n        phone &#123;\n            dimension &quot;version&quot;\n            buildConfigField('String', 'TYPE', '&quot;Phone&quot;')\n            buildConfigField('boolean', 'NEED_PUSH', 'false')\n        &#125;\n    &#125;\n</code></pre>\n<p>æ·»åŠ ä¸¤è¡Œå°±å¥½äº†</p>\n<p>å¦‚æœä½ ä½¿ç”¨äº† HTTP client, ä¼šå‡ºç°è¿™æ ·çš„é”™è¯¯</p>\n<pre><code class=\"language-Java\">Didn't find class &quot;org.apache.http.impl.client.DefaultHttpClient&quot; on path\n</code></pre>\n<p>éœ€è¦åœ¨ manifest çš„ application æ ‡ç­¾ä¸­å¢åŠ å±æ€§</p>\n<pre><code class=\"language-Java\">&lt;uses-library android:name=&quot;org.apache.http.legacy&quot; android:required=&quot;false&quot; /&gt;\n</code></pre>\n<blockquote>\n<p>ä¸ºä¿è¯ç”¨æˆ·æ•°æ®å’Œè®¾å¤‡çš„å®‰å…¨ï¼ŒGoogle é’ˆå¯¹ä¸‹ä¸€ä»£ Android ç³»ç»Ÿ (Android P) çš„åº”ç”¨ç¨‹åºï¼Œå°†è¦æ±‚é»˜è®¤ä½¿ç”¨åŠ å¯†è¿æ¥ï¼Œè¿™æ„å‘³ç€ Android P å°†ç¦æ­¢ App ä½¿ç”¨æ‰€æœ‰æœªåŠ å¯†çš„è¿æ¥ï¼Œå› æ­¤è¿è¡Œ Android P ç³»ç»Ÿçš„å®‰å“è®¾å¤‡æ— è®ºæ˜¯æ¥æ”¶æˆ–è€…å‘é€æµé‡ï¼Œæœªæ¥éƒ½ä¸èƒ½æ˜ç ä¼ è¾“ï¼Œéœ€è¦ä½¿ç”¨ä¸‹ä¸€ä»£ (Transport Layer Security) ä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œè€Œ Android Nougat å’Œ Oreo åˆ™ä¸å—å½±å“.</p>\n</blockquote>\n<p>é»˜è®¤è”ç½‘ä¼šå¤±è´¥ï¼Œè§£å†³åŠæ³•ä¸€æ˜¯é™çº§ 27, è¿™é‡Œæˆ‘ä»¬ä¸é‡‡ç”¨ã€‚ç¬¬äºŒç§å¦‚ä¸‹:<br />\n é¦–å…ˆåœ¨ res æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª xml æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª network_security_config.xml æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network-security-config</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>base-config</span> <span class=\"token attr-name\">cleartextTrafficPermitted</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>network-security-config</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>æ¥ç€ï¼Œåœ¨ AndroidManifest.xml æ–‡ä»¶ä¸‹çš„ application æ ‡ç­¾å¢åŠ ä»¥ä¸‹å±æ€§ï¼š</p>\n<pre><code class=\"language-Java\">&lt;application\n...\n android:networkSecurityConfig=&quot;@xml/network_security_config&quot;\n...\n    /&gt;\n</code></pre>\n<p>æœ€åè¿˜æœ‰æœ€ç®€å•çš„åŠæ³•ï¼Œåœ¨ AndroidManifest.xml é…ç½®æ–‡ä»¶çš„ &lt;application&gt; æ ‡ç­¾ä¸­ç›´æ¥æ’å…¥</p>\n<pre><code class=\"language-Java\">android:usesCleartextTraffic=&quot;true&quot;\n</code></pre>\n<ul>\n<li>æœ€åè®°å¾—åŠ¨æ€æƒé™æ§åˆ¶</li>\n</ul>\n",
            "tags": [
                "Android",
                "SDK"
            ]
        },
        {
            "id": "https://log992.cn/android/%E4%BD%BF%E7%94%A8registerForActivityResult%E6%9B%BF%E6%8D%A2onActivityResult/",
            "url": "https://log992.cn/android/%E4%BD%BF%E7%94%A8registerForActivityResult%E6%9B%BF%E6%8D%A2onActivityResult/",
            "title": "ä½¿ç”¨registerForActivityResultæ›¿æ¢onActivityResult",
            "date_published": "2022-03-17T02:34:55.000Z",
            "content_html": "<blockquote>\n<p>è¿‘æœŸåœ¨æ„å»ºæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç°<strong> onActivityResult</strong> æ–¹æ³•å·²ç»è¢«åºŸå¼ƒäº†ï¼Œäºæ˜¯æœ‰äº†å°è¯•<strong> registerForActivityResult</strong> çš„æƒ³æ³•ã€‚</p>\n</blockquote>\n<h3 id=\"æ ‡å‡†ä½¿ç”¨\"><a class=\"anchor\" href=\"#æ ‡å‡†ä½¿ç”¨\">#</a> æ ‡å‡†ä½¿ç”¨</h3>\n<p>ä¸‰ä¸ªç±» <code>ActivityResultLauncher</code> ã€ <code>ActivityResultContract</code> ã€ <code>ActivityResultCallback</code> <br />\n é¦–å…ˆ <code>ActivityResultLauncher</code>  ä½œä¸ºä¸»è§’ï¼Œå®ƒéœ€è¦é…ç½®ä¸€ä¸ªæ³›å‹ï¼Œè¿™ä¸ªæ³›å‹è·Ÿæˆ‘ä»¬ <code>ActivityResultContract</code>  çš„è¿”å›å€¼ç›¸åŒï¼Œ <code>ActivityResultLauncher</code>  é€šè¿‡ <code>launch</code>  æ–¹æ³•æ¥å¯åŠ¨ç›¸åº”çš„ç•Œé¢æˆ–è€…åŠŸèƒ½ã€‚</p>\n<ol>\n<li>ActivityResultContract</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GalleryContract</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ActivityResultContract</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Uri</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token annotation punctuation\">@NonNull</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Intent</span> <span class=\"token function\">createIntent</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">Context</span> context<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Void</span> input<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token class-name\">Intent</span> intent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            intent<span class=\"token punctuation\">.</span><span class=\"token function\">setAction</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Intent</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ACTION_PICK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            intent<span class=\"token punctuation\">.</span><span class=\"token function\">setType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"image/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">return</span> intent<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Uri</span> <span class=\"token function\">parseResult</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> resultCode<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Nullable</span> <span class=\"token class-name\">Intent</span> intent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">return</span> intent<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>ActivityResultContract</code>  éœ€è¦ä¼ å…¥ä¸¤ä¸ªæ³›å‹ï¼Œä¸€ä¸ªæ³›å‹ä½œä¸º <code>createIntent</code>  æ–¹æ³•çš„ç¬¬äºŒå‚æ•°ç±»å‹ï¼Œè¿™é‡Œå¯ä»¥ä½œä¸ºæˆ‘ä»¬ intent ä¼ å€¼çš„å‚æ•°è½½ä½“ï¼Œ <code>ActivityResultContract</code>  çš„å¦ä¸€ä¸ªæ³›å‹ä½œä¸º <code>parseResult</code>  æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œå®šä¹‰ä» intent è¿”å›çš„å‚æ•°ç±»å‹ã€‚</p>\n<ol start=\"2\">\n<li>ActivityResultLauncher</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">ActivityResultLauncher</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> galleryLauncher <span class=\"token operator\">=</span> <span class=\"token function\">registerForActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">GalleryContract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActivityResultCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Uri</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Uri</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token comment\">//todo something</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>æŠŠ contract å’Œ ActivityResultCallback ä½œä¸º launcher çš„å‚æ•°æ„å»ºå‡º launcher</p>\n<ol start=\"3\">\n<li>ActivityResultCallback<br />\n è¿™ä¸ªé‡Œé¢å°±å’Œ <code>onActivityResult</code>  æ–¹æ³•å›è°ƒä¸€æ ·çš„ï¼Œåªä¸è¿‡æä¾›çš„ç»“æœå‚æ•°æ˜¯æˆ‘ä»¬åœ¨ contract ä¸­å®šä¹‰çš„ã€‚</li>\n</ol>\n<p>4. å¯åŠ¨ launch<br />\n é€šè¿‡ <code> galleryLauncher.launch(null);</code>  å¯åŠ¨å³å¯ã€‚</p>\n<h3 id=\"ç®€å•ä½¿ç”¨\"><a class=\"anchor\" href=\"#ç®€å•ä½¿ç”¨\">#</a> ç®€å•ä½¿ç”¨</h3>\n<p><code>ActivityResultContracts</code> <br />\n è¿™ä¸ªç±»ä¸­æä¾›äº†è®¸å¤šé€šç”¨çš„æ–¹æ³•</p>\n<table>\n<thead>\n<tr>\n<th>ActivityResultContracts.*</th>\n<th>è¯´æ˜</th>\n<th>å‚æ•°</th>\n<th>å›è°ƒ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>StartActivityForResult</strong></td>\n<td>å¯ä»¥ç†è§£ä¸º startActivityForResult</td>\n<td>Intent</td>\n<td>ActivityResult(code,data)</td>\n</tr>\n<tr>\n<td><strong>TakePicture</strong></td>\n<td>é€šè¿‡ MediaStore.ACTION_IMAGE_CAPTURE æ‹ç…§å¹¶ä¿å­˜</td>\n<td>ä¿å­˜æ–‡ä»¶çš„ Uri</td>\n<td>æ˜¯å¦ä¿å­˜æˆåŠŸ</td>\n</tr>\n<tr>\n<td><strong>TakePicturePreview</strong></td>\n<td>é€šè¿‡ MediaStore.ACTION_IMAGE_CAPTURE æ‹ç…§ï¼Œä½†æ˜¯åªä¼šæ‹ä¸€å¼ å°ç…§ç‰‡ï¼Œä½œä¸º thumbnail ä½¿ç”¨æ¯”è¾ƒåˆé€‚</td>\n<td>null(Void)</td>\n<td>å›¾ç‰‡çš„ Bitmap</td>\n</tr>\n<tr>\n<td><strong>CaptureVideo</strong></td>\n<td>é€šè¿‡ MediaStore.ACTION_VIDEO_CAPTURE æ‹æ‘„è§†é¢‘å¹¶ä¿å­˜ (androidx.activity 1.3.0-alpha08 åæä¾›ï¼Œandroidx.appcompat å¥½åƒè¿˜æ²¡æä¾›è¯¥ç±»)</td>\n<td>ä¿å­˜æ–‡ä»¶çš„ Uri</td>\n<td>æ˜¯å¦ä¿å­˜æˆåŠŸã€‚</td>\n</tr>\n<tr>\n<td><strong>RequestPermission</strong></td>\n<td>è¯·æ±‚å•ä¸ªæƒé™</td>\n<td>Manifest.permission.*</td>\n<td>ç”¨æˆ·æ˜¯å¦æˆäºˆè¯¥æƒé™</td>\n</tr>\n<tr>\n<td>RequestMultiplePermissions</td>\n<td>è¯·æ±‚å¤šä¸ªæƒé™</td>\n<td>Array</td>\n<td>å›è°ƒä¸º map, key ä¸ºè¯·æ±‚çš„æƒé™ï¼Œvalue ä¸ºç”¨æˆ·æ˜¯å¦æˆäºˆè¯¥æƒé™</td>\n</tr>\n<tr>\n<td><strong>CreateDocument</strong></td>\n<td>é€šè¿‡ Intent.ACTION_CREATE_DOCUMENT åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</td>\n<td>é»˜è®¤æ–‡ä»¶å</td>\n<td>é€‰æ‹©ç›®å½•åè¿”å›è¯¥æ–‡ä»¶çš„ Uri</td>\n</tr>\n<tr>\n<td><strong>GetContent</strong></td>\n<td>é€šè¿‡ Intent.ACTION_GET_CONTENT è·å–ä¸€ä¸ªæ–‡ä»¶ (è¿™ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡ android.content.ContentResolver.openInputStream è·å–åˆ°æ–‡ä»¶çš„åŸå§‹æ•°æ®)</td>\n<td>MIME ç±»å‹</td>\n<td>æ–‡ä»¶ Uri</td>\n</tr>\n<tr>\n<td><strong>GetMultipleContents</strong></td>\n<td>é€šè¿‡ Intent.ACTION_GET_CONTENT åŠ Intent.EXTRA_ALLOW_MULTIPLE è·å–ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ (è¿™ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡ android.content.ContentResolver.openInputStream è·å–åˆ°æ–‡ä»¶çš„åŸå§‹æ•°æ®)</td>\n<td>MIME ç±»å‹</td>\n<td>æ–‡ä»¶ List</td>\n</tr>\n<tr>\n<td><strong>OpenDocument</strong></td>\n<td>é€šè¿‡ Intent.ACTION_OPEN_DOCUMENT é€‰æ‹©æ–‡ä»¶</td>\n<td>MIME ç±»å‹</td>\n<td>æ–‡ä»¶ Uri</td>\n</tr>\n<tr>\n<td><strong>OpenDocumentTree</strong></td>\n<td>é€šè¿‡ Intent.ACTION_OPEN_DOCUMENT_TREE é€‰æ‹©ä¸€ä¸ªç›®å½•ï¼Œè¿”å›ä¸€ä¸ª Uri å¹¶å¾—åˆ°è¯¥ç›®å½•ä¸‹å…¨éƒ¨æ–‡æ¡£çš„ç®¡ç†æƒ</td>\n<td>ç›®å½•åˆå§‹ä½ç½® Uri</td>\n<td>é€‰æ‹©ç›®å½• Uri</td>\n</tr>\n<tr>\n<td><strong>OpenMultipleDocuments</strong></td>\n<td>é€šè¿‡ Intent.ACTION_OPEN_DOCUMENT åŠ Intent.EXTRA_ALLOW_MULTIPLE è·å–ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶</td>\n<td>MIME ç±»å‹</td>\n<td>æ–‡ä»¶ List</td>\n</tr>\n<tr>\n<td><strong>PickContact</strong></td>\n<td>é€šè¿‡ Intent.ACTION_PICK ä»ç³»ç»Ÿé€šè®¯å½•ä¸­è·å–è”ç³»äºº</td>\n<td>null(Void)</td>\n<td>è”ç³»äºº Uri</td>\n</tr>\n<tr>\n<td>StartIntentSenderForResult*</td>\n<td>æ„å»º IntentSender æˆ– PendingIntent</td>\n<td>ä½¿ç”¨ IntentSenderRequest.Builder æ„å»º</td>\n<td>ActivityResult(code,data)</td>\n</tr>\n<tr>\n<td><strong><sub>TakeVideo</sub></strong></td>\n<td>é€šè¿‡ MediaStore.ACTION_VIDEO_CAPTURE æ‹æ‘„è§†é¢‘å¹¶ä¿å­˜ (å¼ƒç”¨äº†ï¼Œå®˜æ–¹è§£é‡Šæ˜¯ç¼©ç•¥å›¾çš„ Bitmap çš„è¿”å›ä¸ç¨³å®šï¼Œæ›¿æ¢ä¸ºä¸Šé¢çš„ CaptureVideo å³å¯)</td>\n<td>ä¿å­˜æ–‡ä»¶çš„ Uri</td>\n<td>è§†é¢‘ç¼©ç•¥å›¾ Bitmap</td>\n</tr>\n</tbody>\n</table>\n<p>ç±»ä¼¼çš„ä½¿ç”¨å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">ActivityResultLauncher</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> fileLauncher <span class=\"token operator\">=</span> <span class=\"token function\">registerForActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ActivityResultContracts<span class=\"token punctuation\">.</span>GetContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActivityResultCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Uri</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Uri</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">ActivityResultLauncher</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Uri</span><span class=\"token punctuation\">></span></span> videoLauncher <span class=\"token operator\">=</span> <span class=\"token function\">registerForActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ActivityResultContracts<span class=\"token punctuation\">.</span>CaptureVideo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActivityResultCallback</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Boolean</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Boolean</span> result<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>           </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"æ³¨æ„\"><a class=\"anchor\" href=\"#æ³¨æ„\">#</a> æ³¨æ„</h3>\n<p>ä¸èƒ½åœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™å†å»æ„å»ºæˆ‘ä»¬éœ€è¦çš„ launcherï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸<br />\nåœ¨ <code>Activity</code>  ä¸­<img data-src=\"https://image.log1992.com/blog/typecho/20211201040945.jpg\" alt=\"\" /></p>\n<p>åœ¨ <code>Fragment</code>  ä¸­<br />\n<img data-src=\"https://image.log1992.com/blog/typecho/20211201041029.png\" alt=\"\" /></p>\n",
            "tags": [
                "Android",
                "onActivityResult"
            ]
        },
        {
            "id": "https://log992.cn/android/%E8%8E%AB%E5%90%8D%E5%85%B6%E5%A6%99%E7%9A%84TransactionTooLargeException/",
            "url": "https://log992.cn/android/%E8%8E%AB%E5%90%8D%E5%85%B6%E5%A6%99%E7%9A%84TransactionTooLargeException/",
            "title": "è«åå…¶å¦™çš„TransactionTooLargeException",
            "date_published": "2022-03-17T02:34:55.000Z",
            "content_html": "<h3 id=\"é”™è¯¯\"><a class=\"anchor\" href=\"#é”™è¯¯\">#</a> é”™è¯¯</h3>\n<p><img data-src=\"https://image.log1992.com/blog/typecho/20220121104348.png\" alt=\"\" /></p>\n<blockquote>\n<p>æœ€è¿‘å°†æŸä¸ªè€é¡¹ç›®å‡çº§åˆ° AndroidXï¼Œå¹¶ä¸”åœ¨å°† minSdk ç”± 19 æå‡è‡³ 24ï¼ŒtargetSdk ç”± 23 æå‡è‡³ 28 åï¼Œåœ¨æŸä¸ªæ•°æ®é‡è¾ƒå¤§çš„åœºæ™¯å‡ºç°äº†ä¸Šè¿°é”™è¯¯ã€‚</p>\n</blockquote>\n<h3 id=\"åŸå› \"><a class=\"anchor\" href=\"#åŸå› \">#</a> åŸå› </h3>\n<p>è¯¥é—®é¢˜å‡ºç°åœ¨æœ‰ä¸€ä¸ªç•Œé¢è·³è½¬åˆ°å¦ä¸€ä¸ªç•Œé¢æ—¶ï¼Œå¤§æ¦‚å«ä¹‰å°±æ˜¯ä¼ é€’çš„æ•°æ®é‡è¿‡å¤§ï¼Œè¶…è¿‡äº†é™åˆ¶ã€‚åˆ†ææŠ›å‡ºçš„åŸå› æˆ–æ¡ä»¶ï¼ŒæŸ¥çœ‹æºç  android_util_binder.cppï¼ŒæŸ¥çœ‹ç³»ç»Ÿå±‚åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠ›å‡º TransactionTooLargeException å¯çŸ¥åœ¨ binder é©±åŠ¨å¤„ç†å¤±è´¥åï¼Œå¦‚æœä¼ è¾“çš„ parcel ä½“ç§¯è¶…è¿‡ 200kbï¼Œåˆ™ä¼šæŠ›å‡º TransactionTooLargeExceptionï¼Œå› æ­¤å¼•å‘è¯¥é—®é¢˜çš„åŸå› æ˜¯ binder è°ƒç”¨ä¼ è¾“çš„æ•°æ®å¤ªå¤§å¯¼è‡´ï¼Œé—®é¢˜åˆ†æé‡ç‚¹åº”ä¾§é‡ binder æ•°æ®ä¼ è¾“ã€‚</p>\n<h3 id=\"è§£å†³\"><a class=\"anchor\" href=\"#è§£å†³\">#</a> è§£å†³</h3>\n<ol>\n<li>æŸ¥çœ‹ä»£ç åå‘ç°ï¼Œé¡¹ç›®ä¸­åœ¨è·³è½¬æ—¶å¹¶æœªæºå¸¦è¿‡å¤šæ•°æ®</li>\n</ol>\n<pre><code class=\"language-Java\">Intent intent = new Intent(context, TestDetectionEditTabInnerActivity.class);\n                    intent.putExtra(NavigationViewDataInitHelper.TYPE_CODE, editViewModel.getFieldType());\n                    intent.putExtra(TestDetectionEditTabInnerActivity.RECORD_VALUE, editViewModel.getValue());\n                    intent.putExtra(TestDetectionEditTabInnerActivity.PROJECT_NAME, editViewModel.getName());\n                    intent.putExtra(NavigationViewDataInitHelper.FUNCTION_IDENTIFICATION, functionIdentification);\n                    fragment.startActivityForResult(intent, Constants.REQUEST_CODE);\n</code></pre>\n<p>å…¶ä¸­</p>\n<pre><code class=\"language-Java\">editViewModel.getFieldType()\n</code></pre>\n<pre><code class=\"language-Java\">editViewModel.getValue()\n</code></pre>\n<pre><code class=\"language-Java\">editViewModel.getName()\n</code></pre>\n<p>ä»¥åŠ</p>\n<pre><code class=\"language-Java\">functionIdentification\n</code></pre>\n<p>éƒ½æ˜¯ <code>String</code>  ç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®é•¿åº¦éƒ½ä¸å¤§ã€‚ ç»¼åˆå®é™…æ’é”™è¿‡ç¨‹ä¸­çš„æ“ä½œï¼Œåªæœ‰åœ¨ä¸€ä¸ªå†…åµŒçš„ <code>fragment</code>  æ•°æ®åŠ è½½æ—¶æ‰ä¼šå‡ºç°ä¸Šè¿°é”™è¯¯ï¼Œé‚£æˆ‘ä»¬å…ˆå» <code>fragment</code>  ä¸­çœ‹ä¸‹ï¼š</p>\n<pre><code class=\"language-Java\">@Override\n    public Bundle createBundle(QFormViewModel viewModel, ExpandFormSchemaModel dataModel) &#123;\n        Bundle bundle = new Bundle();\n        bundle.putString(INTENT_SMART_INPUT_FRAGMENT_SOURCE, dataModel.getDataSource());\n        mParamValidators = dataModel.getParamValidators();\n        mDatasourceKey = dataModel.getDatasourceKey();\n        mJsonBody = dataModel.getJsonBody();\n        mListSource = dataModel.getListSource();\n        mFunctionIdentification = dataModel.getFunctionIdentification();\n        return bundle;\n    &#125;\n</code></pre>\n<p>å¥½å®¶ä¼™ï¼Œå…ˆæŠŠè¿™ä¸ª bundle å¹²æ‰å†è¯´</p>\n<pre><code class=\"language-Java\">@Override\n    public Bundle createBundle(QFormViewModel viewModel, ExpandFormSchemaModel dataModel) &#123;\n        mParamValidators = dataModel.getParamValidators();\n        mDatasourceKey = dataModel.getDatasourceKey();\n        mJsonBody = dataModel.getJsonBody();\n        mListSource = dataModel.getListSource();\n        mFunctionIdentification = dataModel.getFunctionIdentification();\n        return null;\n    &#125;\n</code></pre>\n<p>é‡æ–°ç¼–è¯‘è¿è¡Œï¼Œå‘ç°è¿˜æ˜¯ GG</p>\n<ol start=\"2\">\n<li>é‚£ä¹ˆè¯´æ˜è¿˜æœ‰å…¶ä»–çš„åœ°æ–¹æœ‰å¤§é‡æ•°æ®è¢«å¸¦å…¥åˆ°è·³è½¬æ—¶å€™çš„ <code>binder</code>  ä¸­ã€‚ å›åˆ°å…ˆå‰è·³è½¬çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å‘ç° <code>startActivityForResult</code>  çš„åœ°æ–¹å±…ç„¶æ˜¯ç”¨çš„ <code>fragment</code> ï¼ŒåŸæ¥åœ¨è¿™å„¿å‘¢ï¼Œçœ‹åˆ°ä¸Šé¢çš„ <code>context</code>  ç›´æ¥å°±æ˜¯ä¸€ä¸ª <code>activity</code>  å¼•ç”¨ï¼Œç›´æ¥ä½¿ç”¨ <code>context.startActivityForResult</code> , æœç„¶é‡æ–°éªŒè¯åæ²¡æœ‰å‡ºç°æ•°æ®ä¼ é€’è¶…è¿‡é™åˆ¶çš„é—®é¢˜äº†ï¼Œçœ‹æ¥é—®é¢˜å°±åœ¨è¿™ä¸ª <code>fragment</code>  ä¸­ã€‚</li>\n<li>æ¥åˆ°è¿™ä¸ª <code>fragment</code>  ä¸­</li>\n</ol>\n<pre><code class=\"language-Java\">public static TestDetectionEditTabFragment newInstance(\n            List&lt;TestDetectionEditViewModel&gt; models,\n            String recordId,\n            String functionIdentification,\n            String type, String projectName, String defaultValue) &#123;\n        Bundle args = new Bundle();\n        args.putParcelableArrayList(MODELS, (ArrayList&lt;? extends Parcelable&gt;) models);\n        args.putString(RECORD_ID, recordId);\n        args.putString(FUNCTION_IDENTIFICATION, functionIdentification);\n        args.putString(TYPE, type);\n        args.putString(PROJECT_NAME, projectName);\n        args.putString(DEFAULT_VALUE, defaultValue);\n        TestDetectionEditTabFragment fragment = new TestDetectionEditTabFragment();\n        fragment.setArguments(args);\n        return fragment;\n    &#125;\n</code></pre>\n<p>æˆ‘ä»¬çœ‹åˆ°åœ¨é™æ€æ–¹æ³•ä¸­å¾€ <code>Bundle</code>  ä¸­å¡å…¥äº†å¾ˆå¤šçš„æ•°æ®ï¼Œè¿™äº›æ•°æ®åœ¨å…ˆå‰ <code>startActivityForResult</code>  çš„æ—¶å€™å°±æ˜¯ä½œä¸ºå¼•ç”¨ <code>context</code>  åŒ…å«åœ¨ <code>binder</code>  ä¸­ã€‚<br />\næ‰¾åˆ° <code>Bundle</code>  æ•°æ®è·å–å®Œçš„åœ°æ–¹ï¼Œå¯¹ <code>Bundle</code>  å®æ–½ <code>clear</code>  æ–¹æ³•ã€‚ä¸€èˆ¬æ˜¯ <code>onViewCreated</code>  æ–¹æ³•ä¸­ï¼Œæˆ‘è¿™é‡Œæ˜¯è‡ªå·±å®šä¹‰çš„æ–¹æ³•ã€‚</p>\n<pre><code class=\"language-Java\">@Override\n    protected void iData(View view) &#123;\n        Bundle arguments = getArguments();\n        if (arguments != null) &#123;\n            models = arguments.getParcelableArrayList(MODELS);\n            recordId = arguments.getString(RECORD_ID);\n            functionIdentification = arguments.getString(FUNCTION_IDENTIFICATION);\n            type = arguments.getString(TYPE);\n            projectName = arguments.getString(PROJECT_NAME);\n            defaultValue = arguments.getString(DEFAULT_VALUE);\n            setAdapter(models);\n            arguments.clear();\n        &#125;\n    &#125;\n</code></pre>\n<p><img data-src=\"https://image.log1992.com/blog/typecho/20220121051734.png\" alt=\"\" /></p>\n<ol start=\"4\">\n<li>æ”¹å®Œåå‘ç°å½±å“äº†å…¶ä»–åŠŸèƒ½<br />\n<img data-src=\"https://image.log1992.com/blog/typecho/20220121051925.png\" alt=\"\" /><br />\nåŸæ¥é¡¹ç›®ä¸­é’ˆå¯¹ <code>fragment</code>  ä¸“é—¨å¤„ç†äº† <code>onActivityResult</code> ï¼Œå¯¼è‡´é‡æ–°è¿›å…¥çš„æ—¶å€™ <code>Bundle</code>  ä¸­çš„æ•°æ®è·å–ä¸åˆ°å¼•èµ·äº†å…¶ä»–çš„é”™è¯¯ã€‚<br />\næœ€åï¼Œç›´æ¥åœ¨éœ€è¦ä¼ å€¼çš„åœ°æ–¹ï¼Œå°†æ•°æ®ä¼ é€’ç»™æˆå‘˜å˜é‡</li>\n</ol>\n<pre><code class=\"language-Java\">public static TestDetectionEditTabFragment newInstance(\n            List&lt;TestDetectionEditViewModel&gt; models,\n            String recordId,\n            String functionIdentification,\n            String type, String projectName, String defaultValue) &#123;\n        Bundle args = new Bundle();\n        args.putString(RECORD_ID, recordId);\n        args.putString(FUNCTION_IDENTIFICATION, functionIdentification);\n        args.putString(TYPE, type);\n        args.putString(PROJECT_NAME, projectName);\n        args.putString(DEFAULT_VALUE, defaultValue);\n        TestDetectionEditTabFragment fragment = new TestDetectionEditTabFragment();\n        fragment.setArguments(args);\n        fragment.setModels(models);\n        return fragment;\n    &#125;\n</code></pre>\n<p>é€šè¿‡ <code>set</code>  æ–¹æ³•ç›´æ¥èµ‹å€¼</p>\n<pre><code class=\"language-Java\">public void setModels(List&lt;TestDetectionEditViewModel&gt; models)&#123;\n        this.models = models;\n    &#125;\n</code></pre>\n<h3 id=\"æ€»ç»“\"><a class=\"anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h3>\n<blockquote>\n<p>å¤„ç† <code>TransactionTooLargeException</code>  çš„æ ¹æœ¬è¿˜æ˜¯è¦é’ˆå¯¹æ•°æ®ä¼ è¾“åšä¼˜åŒ–ï¼Œè¦ä¹ˆä½¿ç”¨ç±»ä¼¼ <code>EventBus</code>  çš„æ–¹æ³•ï¼Œè¦ä¹ˆä½¿ç”¨æˆå‘˜å˜é‡ç›´æ¥èµ‹å€¼ï¼Œé¿å¼€é€šè¿‡ <code>Bundle</code>  ä¼ å€¼è¿™ä¸ªå‘ã€‚</p>\n</blockquote>\n",
            "tags": [
                "Android",
                "Android studio"
            ]
        }
    ]
}